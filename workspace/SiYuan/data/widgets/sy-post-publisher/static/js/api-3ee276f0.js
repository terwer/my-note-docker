var se=Object.defineProperty;var oe=(o,e,t)=>e in o?se(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var l=(o,e,t)=>(oe(o,typeof e!="symbol"?e+"":e,t),t);import{bG as ie,aG as ae,O as j,P as X,a1 as A,U as P,W as w,_ as nt,M as gt,bH as re,bI as ne,u as tt,ac as wt,A as le,$ as v,y as lt,Z as Ct,bJ as ce,bK as ge,Q as vt,L as pe,T as de,Y as he,bL as me}from"./vendor-a9bad54d.js";import{c as Ee}from"./vendor_pinia-306dd1ce.js";import{c as Fe,u as be}from"./vendor_vue-i18n-5b80ab8c.js";import{E as q,a as kt,b as fe,c as we,d as Ce,e as ye,f as Ae,g as De,h as Be}from"./vendor_element-plus-93a388b3.js";import{H as f,j as yt,t as At,c as _e,a as Pe,b as at,d as Dt,x as Bt,e as Se,p as Te}from"./vendor_highlight-js-4c21db5d.js";import{b as Ie}from"./vendor_plantuml-encoder-18698577.js";import{l as ut}from"./vendor_loglevel-bd2e1c44.js";import{p as Ot}from"./vendor_loglevel-plugin-prefix-34a2ac06.js";import{n as ve}from"./vendor_browser-fs-access-5b1a413d.js";import{d as Ut}from"./vendor_transliteration-0556f169.js";import{d as ke}from"./vendor_shorthash2-e60185c0.js";import{g as pt}from"./vendor_js-base64-904ab953.js";import{f as Oe}from"./vendor_fast-xml-parser-512675b8.js";import{s as Ue,x as _t}from"./vendor_xmlrpc-bd2abe58.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const Le={"lang.choose":"\u8BED\u8A00\u9009\u62E9","lang.choose.placeholder":"\u8BF7\u9009\u62E9\u8BED\u8A00","theme.mode.choose":"\u5207\u6362\u6A21\u5F0F","theme.mode.dark":"\u6697\u9ED1\u6A21\u5F0F","theme.mode.light":"\u6D45\u8272\u6A21\u5F0F","service.tab.publish.service":"\u53D1\u5E03\u670D\u52A1","service.tab.publish.setting":"\u53D1\u5E03\u914D\u7F6E","service.tab.post.bind":"\u6587\u7AE0\u7ED1\u5B9A","service.tab.service.switch":"\u670D\u52A1\u5F00\u5173","service.tab.change.local":"\u901A\u7528\u8BBE\u7F6E","main.publish.editmode":"\u7F16\u8F91\u6A21\u5F0F","main.publish.editmode.simple":"\u7B80\u6D01\u6A21\u5F0F","main.publish.editmode.complex":"\u8BE6\u7EC6\u6A21\u5F0F","main.publish.vuepress.tip":"\u63A8\u8350Vuepress\u7684V1\u7248\u672C\uFF0C\u914D\u5408 vuepress-theme-vdoing \u4F7F\u7528\uFF0C\u540E\u7EEDbug\u4E5F\u53EA\u4F1A\u5BF9V1\u548C\u6B64\u4E3B\u9898\u8FDB\u884C\u66F4\u65B0","main.publish.github.error.tip":"\u7531\u4E8EGithub\u7684rest\u7684API\u95EE\u9898\uFF0C\u5BFC\u81F4\u66F4\u65B0\u6682\u65F6\u65E0\u6CD5\u5904\u7406\uFF0C\u5982\u9700\u66F4\u65B0\u8BF7\u5148\u70B9\u53D6\u6D88\u5220\u9664\u518D\u65B0\u589E\u5373\u53EF\uFF0C\u53EF\u4EE5\u67E5\u770B\u8FD9\u91CC\u7B49\u5F85\u4FEE\u590D\u8FDB\u5EA6\uFF1Ahttps://github.com/terwer/src-sy-post-publisher/issues/21\u3002","main.publish.github":"\u53D1\u5E03Github","main.publish.github.tip":"\u81EA\u52A8\u5C06\u6587\u7AE0\u7684markdown\u6587\u672C\u53D1\u5E03\u5230Vuepress\u5BF9\u5E94\u7684Github\u4ED3\u5E93\uFF08\u9700\u8981\u5148\u8FDB\u884C\u76F8\u5173\u914D\u7F6E\uFF09","main.publish.github.no.tip":"\u60A8\u672A\u5F00\u542FGithub\u53D1\u5E03\uFF0C\u8BF7\u5728\u70B9\u51FB\u53D1\u5E03\u4E4B\u540E\u81EA\u884C\u590D\u5236\u53F3\u4FA7\u6587\u672C","main.publish.github.choose.path":"\u8BF7\u9009\u62E9\u76EE\u5F55","main.publish.github.choose.path.use.default":"\u9ED8\u8BA4\u76EE\u5F55","main.publish.github.choose.path.use.default.tip":"\u4F7F\u7528\u9ED8\u8BA4\u76EE\u5F55\uFF0C\u5219\u9ED8\u8BA4\u6240\u6709\u6587\u7AE0\u90FD\u53D1\u5E03\u5728\u914D\u7F6E\u597D\u7684\u9ED8\u8BA4\u76EE\u5F55\u4E0B\uFF0C\u65E0\u9700\u6BCF\u6B21\u53D1\u5E03\u7684\u65F6\u5019\u6765\u9009\u62E9\u76EE\u5F55","main.publish.github.choose.title":"\u6587\u4EF6\u540D","main.publish.github.choose.title.tip":"Vuepress-theme-vdoing\u652F\u6301\u6587\u4EF6\u540D\u52A0\u4E0A\u5E8F\u53F7\u6765\u6807\u8BC6\uFF0C\u5982\u679C\u4F60\u4E0D\u6E05\u695A\u6B64\u7528\u6CD5\uFF0C\u8BF7\u4E0D\u8981\u4FEE\u6539\u6587\u4EF6\u540D","main.publish.github.failure":"\u53D1\u5E03\u5931\u8D25\uFF0C\u8BF7\u81EA\u884C\u590D\u5236\u53F3\u4FA7\u6587\u672C","main.publish.github.see.preview":"\u70B9\u51FB\u8FD9\u91CC\u67E5\u770B\u6700\u65B0\u6587\u7AE0","main.publish.github.see.md.preview":"\u70B9\u51FB\u8FD9\u91CC\u67E5\u770BMD\u6587\u4EF6","main.publish.github.see.real.preview":"\u70B9\u51FB\u8FD9\u91CC\u67E5\u770B\u6700\u65B0\u6587\u7AE0","main.publish.to.wordpress":"\u53D1\u5E03\u5230Wordpress","main.slug":"\u6587\u7AE0\u522B\u540D","main.auto.fetch.slug":"\u81EA\u52A8\u751F\u6210\u522B\u540D","main.use.google.translate":"\u4F7F\u7528Google\u7FFB\u8BD1API","main.use.hash":"\u4F7F\u7528hash","main.use.hash.tip":"\u4E0D\u4F7F\u7528hash\u4F1A\u5C55\u793A\u66F4\u6709\u610F\u4E49\u7684url\uFF0C\u4F46\u662F\u53EF\u80FD\u5BFC\u81F4\u6587\u7AE0\u522B\u540D\u91CD\u590D\uFF08\u540E\u679C\u662FVuepress\u4F1ABuild\u5931\u8D25\u9664\u975E\u624B\u52A8\u89E3\u51B3\u522B\u540D\u552F\u4E00\u95EE\u9898\uFF09\uFF0C\u8BF7\u77E5\u6089\u3002","main.force.refresh":"\u5F3A\u5236\u5237\u65B0","main.force.refresh.tip":"\u4E3A\u4E86\u9632\u6B62\u8BEF\u64CD\u4F5C\u66F4\u65B0\u522B\u540D\uFF0C\u522B\u540D\u4E0D\u4E3A\u7A7A\u7684\u65F6\u5019\u9ED8\u8BA4\u4E0D\u4F1A\u66F4\u65B0\u522B\u540D\uFF0C\u5982\u9700\u66F4\u65B0\uFF0C\u8BF7\u52FE\u9009\u3002","main.desc":"\u6587\u7AE0\u6458\u8981","main.auto.fetch.desc":"\u81EA\u52A8\u63D0\u53D6\u6458\u8981","main.create.time":"\u53D1\u5E03\u65F6\u95F4","main.create.time.placeholder":"\u8BF7\u9009\u62E9\u53D1\u5E03\u65F6\u95F4","main.tag":"\u6587\u7AE0\u6807\u7B7E","main.tag.new":"\u65B0\u6807\u7B7E","main.auto.fetch.tag":"\u81EA\u52A8\u63D0\u53D6\u6807\u7B7E","main.tag.auto.switch":"\u81EA\u52A8\u6807\u7B7E","main.tag.auto.switch.no.tip":"\u81EA\u52A8\u6807\u7B7E\u5DF2\u5173\u95ED\uFF0C\u5C06\u4E0D\u4F1A\u81EA\u52A8\u751F\u6210\u6807\u7B7E","main.cat":"\u6587\u7AE0\u5206\u7C7B","main.cat.empty":"\u6682\u65E0\u5206\u7C7B","main.cat.select":"\u8BF7\u9009\u62E9\u5206\u7C7B","main.yaml.formatter":"YAML Formatter","main.siyuan.to.yaml":"\u601D\u6E90\u5C5E\u6027\u8F6CYAML","main.yaml.to.siyuan":"YAML\u8F6C\u601D\u6E90\u5C5E\u6027","main.save.attr.to.siyuan":"\u4FDD\u5B58\u5C5E\u6027\u5230\u601D\u6E90","main.copy":"\u590D\u5236","main.publish":"\u53D1\u5E03","main.publish.loading":"\u53D1\u5E03\u4E2D...","main.loading":"\u52A0\u8F7D\u4E2D...","main.update":"\u66F4\u65B0","main.cancel":"\u53D6\u6D88","main.publish.oneclick.attr":"\u4E00\u952E\u751F\u6210\u5C5E\u6027","main.publish.oneclick.attr.finish":"\u5C5E\u6027\u5DF2\u751F\u6210","main.publish.status.unpublish":"\u672A\u53D1\u5E03","main.publish.status.published":"\u5DF2\u53D1\u5E03","main.publish.to.vuepress":"\u53D1\u5E03\u5230Vuepress","main.publish.to.hugo":"\u53D1\u5E03\u5230Hugo","main.publish.to.hexo":"\u53D1\u5E03\u5230Hexo","main.publish.to.jekyll":"\u53D1\u5E03\u5230Jekyll","main.publish.to.jvue":"\u53D1\u5E03\u5230JVue","main.publish.to.conf":"\u53D1\u5E03\u5230Confluence","main.publish.to.cnblogs":"\u53D1\u5E03\u5230\u535A\u5BA2\u56ED","main.publish.to.liandi":"\u53D1\u5E03\u5230\u94FE\u6EF4","main.publish.to.yuque":"\u53D1\u5E03\u5230\u8BED\u96C0","main.publish.to.kms":"\u53D1\u5E03\u5230KMS","main.opt.success":"\u64CD\u4F5C\u6210\u529F","main.opt.failure":"\u64CD\u4F5C\u5931\u8D25","main.opt.quick":"\u5FEB\u6377\u64CD\u4F5C","main.opt.status.publish":"\u6587\u7AE0\u5DF2\u53D1\u5E03","main.opt.status.cancel":"\u6587\u7AE0\u53D1\u5E03\u5DF2\u53D6\u6D88","main.opt.loading":"\u64CD\u4F5C\u4E2D...","main.opt.warning":"\u8B66\u544A\u4FE1\u606F","main.opt.ok":"\u786E\u8BA4","main.opt.cancel":"\u53D6\u6D88","main.opt.warning.tip":"\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","setting.noneed":"\u65E0\u9700\u914D\u7F6E","setting.blog.setting":"\u8BBE\u7F6E","setting.blog.type":"\u535A\u5BA2\u7C7B\u578B","setting.blog.type.placeholder":"\u8BF7\u9009\u62E9\u535A\u5BA2\u7C7B\u578B","setting.blog.type.wordpress.value":"Wordpress","setting.blog.type.wordpress.label":"Wordpress","setting.blog.type.metaweblog.value":"MetaweblogApi","setting.blog.type.metaweblog.label":"Metaweblog API","setting.blog.type.github.value":"Github","setting.blog.type.github.label":"Github","setting.blog.type.github.user":"Github\u7528\u6237\u540D","setting.blog.type.github.user.tip":"Github\u7528\u6237\u540D\uFF0C\u4F8B\u5982\uFF1Aterwer","setting.blog.type.github.repo":"Github\u4ED3\u5E93\u540D","setting.blog.type.github.repo.tip":"Github\u4ED3\u5E93\u540D\uFF0C\u4F8B\u5982\uFF1Aterwer.github.io","setting.blog.type.github.token":"Github\u4EE4\u724C","setting.blog.type.github.token.tip":"Github\u4EE4\u724C\uFF0C\u4F8B\u5982\uFF1Aghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","setting.blog.type.github.token.gen":"Github \u4E2A\u4EBA\u4EE4\u724C\u751F\u6210\u5730\u5740","setting.blog.type.github.default.branch":"\u9ED8\u8BA4\u5206\u652F","setting.blog.type.github.default.branch.tip":"\u9ED8\u8BA4\u5206\u652F\uFF08\u65E7\u7248\u4ED3\u5E93\u4E3Amaster\uFF0C\u65B0\u7248\u4ED3\u5E93\u9ED8\u8BA4\u4E3Amain\uFF09\uFF0C\u4F8B\u5982\uFF1Amain","setting.blog.type.github.default.path":"\u5B58\u50A8\u76EE\u5F55","setting.blog.type.github.default.path.tip":"\u5B58\u50A8\u76EE\u5F55\uFF08\u76F8\u5BF9\u4E8E\u4ED3\u5E93\u6839\u76EE\u5F55\u7684\u76F8\u5BF9\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u6240\u6709\u6587\u7AE0\u90FD\u53D1\u5E03\u5728\u8FD9\u91CC\uFF09\uFF0C\u4F8B\u5982\uFF1Adocs/_posts","setting.blog.type.github.msg":"\u63D0\u4EA4\u4FE1\u606F","setting.blog.type.github.msg.tip":"\u63D0\u4EA4\u4FE1\u606F\uFF0C\u4F8B\u5982\uFF1Aauto published by sy-post-publisher","setting.blog.type.github.author":"\u4F5C\u8005","setting.blog.type.github.author.tip":"\u4F5C\u8005\uFF0C\u4F8B\u5982\uFF1Aterwer","setting.blog.type.github.email":"\u90AE\u7BB1","setting.blog.type.github.email.tip":"\u90AE\u7BB1","setting.blog.url":"\u535A\u5BA2\u7F51\u5740","setting.blog.username":"\u8D26\u53F7","setting.blog.password":"\u5BC6\u7801/Token","setting.blog.apiurl":"API\u5730\u5740","setting.blog.previewUrl":"\u9884\u89C8\u89C4\u5219","setting.blog.pageType":"\u53D1\u5E03\u683C\u5F0F","setting.blog.validate":"\u9A8C\u8BC1","setting.blog.save":"\u4FDD\u5B58","setting.blog.vali":"\u9A8C\u8BC1","setting.blog.vali.tip":"\u5F3A\u70C8\u5EFA\u8BAE\u4FDD\u5B58\u4E4B\u524D\u5148\u9A8C\u8BC1\u914D\u7F6E\u4EE5\u4FDD\u8BC1api\u7684\u53EF\u7528\u6027\uFF0C\u9A8C\u8BC1\u8FC7\u7A0B\u4E2D\u5C06\u53D1\u9001\u4E00\u7BC7\u6D4B\u8BD5\u6587\u7AE0\uFF0C\u60A8\u53EF\u4EE5\u7A0D\u540E\u5728\u5E73\u53F0\u624B\u52A8\u5220\u9664\u5B83\u3002\u60A8\u4E5F\u53EF\u4EE5\u5148\u4FDD\u5B58\uFF0C\u7A0D\u540E\u4FEE\u6539\uFF0C\u4F46\u662F\u5728\u9A8C\u8BC1\u901A\u8FC7\u4E4B\u524D\u8BE5api\u5C06\u4E0D\u53EF\u4F7F\u7528\u3002","setting.blog.vali.tip.metaweblog":"\u914D\u7F6E\u9519\u8BEF\u6216\u8005api\u4E0D\u53EF\u7528\uFF0C\u8BF7\u68C0\u67E5\u3002\u82E5\u4FEE\u6539\u8FC7\u914D\u7F6E\uFF0C\u8BF7\u5237\u65B0\u9875\u9762","setting.blog.vali.ing":"\u9A8C\u8BC1\u4E2D...","setting.blog.vali.ok":"\u9A8C\u8BC1\u901A\u8FC7\uFF0C\u4E0D\u8981\u5FD8\u4E86\u70B9\u51FB\u4E0B\u65B9\u4FDD\u5B58\u54DF(*^\u25BD^*)","setting.blog.vali.ok.metaweblog":"\u914D\u7F6E\u5DF2\u4FDD\u5B58\u5E76\u9A8C\u8BC1\u901A\u8FC7","setting.blog.vali.error":"API\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u914D\u7F6E","setting.blog.platform.support.metaweblog":"\u60A8\u5F53\u524D\u64CD\u4F5C\u7684\u662F\u652F\u6301metaweblog\u7684\u5E73\u53F0\uFF1A","setting.blog.cancel":"\u53D6\u6D88","setting.vuepress":"Vuepress","setting.hugo":"Hugo","setting.hexo":"Hexo","setting.jekyll":"Jekyll","setting.jvue":"JVue","setting.conf":"Confluence","setting.conf.tip":"\u53D1\u5E03\u5230Confluence\u9700\u8981\u914D\u5408\u6211\u7684\u53E6\u4E00\u4E2A\u9002\u914D\u5668\u9879\u76EE\u4F7F\u7528\uFF08\u5F3A\u70C8\u63A8\u8350\uFF09\uFF0C\u8BF7\u53C2\u8003\uFF1Ahttps://github.com/terwer/node-metaweblog-api-adaptor","setting.cnblogs":"\u535A\u5BA2\u56ED","setting.wordpress":"Wordpress","setting.liandi":"\u94FE\u6EF4","setting.yuque":"\u8BED\u96C0","setting.kms":"KMS","setting.other1":"\u5176\u4ED61","service.switch.vuepress":"Vuepress","service.switch.hugo":"Hugo","service.switch.hexo":"Hexo","service.switch.jekyll":"Jekyll","service.switch.jvue":"JVue","service.switch.conf":"Confluence","service.switch.cnblogs":"\u535A\u5BA2\u56ED","service.switch.wordpress":"Wordpress","service.switch.yuque":"\u8BED\u96C0","service.switch.liandi":"\u94FE\u6EF4","service.switch.wechat":"\u5FAE\u4FE1\u804A\u5929","service.switch.wemp":"\u5FAE\u4FE1\u516C\u4F17\u53F7","service.switch.zhihu":"\u77E5\u4E4E","service.switch.kms":"\u77E5\u8BC6\u4ED3\u5E93","service.switch.must.select.one":"\u60A8\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u81F3\u5C11\u5E73\u53F0","post.bind.vuepress.slug":"Vuepress\u522B\u540D","post.bind.hugo.slug":"Hugo\u522B\u540D","post.bind.hexo.slug":"Hexo\u522B\u540D","post.bind.jekyll.slug":"Jekyll\u522B\u540D","post.bind.cnblogs.postid":"\u535A\u5BA2\u56ED\u522B\u540D","post.bind.jvue.postid":"JVue\u7684ID","post.bind.conf.postid":"Conf\u7684ID","post.bind.wordpress.postid":"WP\u7684ID","post.bind.liandi.postid":"\u94FE\u6EF4\u7684ID","post.bind.yuque.postid":"\u8BED\u96C0\u7684ID","post.bind.kms.postid":"KMS\u7684ID","post.bind.conf.save":"\u4FDD\u5B58","post.bind.conf.cancel":"\u53D6\u6D88","form.validate.name.required":"\u8BF7\u8F93\u5165\u540D\u79F0","form.validate.name.length":"\u957F\u5EA6\u5FC5\u987B\u57280\u52301\u4E4B\u95F4","form.validate.github.auto.delete":"\u81EA\u52A8\u5220\u9664","dynamic.platform.new":"\u65B0\u589E\u5E73\u53F0","dynamic.platform.tip":"\u5982\u679C\u5185\u7F6E\u7684\u53D1\u5E03\u670D\u52A1\u65E0\u6CD5\u6EE1\u8DB3\u6216\u8005\u9700\u8981\u6DFB\u52A0\u591A\u4E2A\u5B9E\u4F8B\uFF0C\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u6DFB\u52A0\u53D7\u652F\u6301\u7684\u5E73\u53F0\uFF0C\u76EE\u524D\u652F\u6301Github\uFF08HUGO\u3001HEXO\u3001Jekyll\u7B49\uFF09\u3001metaweblog API\uFF08\u5F00\u6E90\u4E2D\u56FD\u7B49\uFF09\u548CWordpress API","dynamic.platform.type":"\u5E73\u53F0\u7C7B\u578B[\u5FC5\u9009]","dynamic.platform.subtype":"\u5B50\u5E73\u53F0\u540D\u79F0","dynamic.platform.type.metaweblog":"metaweblog API","dynamic.platform.type.wordpress":"Wordpress","dynamic.platform.type.github":"Github","dynamic.platform.type.custom":"\u81EA\u5B9A\u4E49","dynamic.platform.key":"\u5E73\u53F0key","dynamic.platform.key.tip":"\u5E73\u53F0\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4F8B\u5982\uFF1Amyblog","dynamic.platform.name":"\u5E73\u53F0\u540D\u79F0","dynamic.platform.name.tip":"\u5E73\u53F0\u540D\u79F0\uFF0C\u4F8B\u5982\uFF1A\u6211\u7684\u535A\u5BA2","dynamic.platform.opt.add":"\u63D0\u4EA4","dynamic.platform.opt.noselect":"\u8BF7\u9009\u62E9\u5E73\u53F0\u7C7B\u578B","dynamic.platform.opt.key.exist":"\u5E73\u53F0key\u5DF2\u7ECF\u5B58\u5728","dynamic.platform.opt.del.confirm":"\u5220\u9664\u6B64\u5E73\u53F0\u5C06\u4F1A\u5F7B\u5E95\u79FB\u9664\u6B64\u5E73\u53F0\u76F8\u5173\u914D\u7F6E\u4FE1\u606F\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","dynamic.platform.opt.del.select":"\u5220\u9664\u9009\u4E2D","dynamic.platform.opt.item.select":"\u672A\u9009\u62E9","dynamic.platform.opt.item.select.tip":"\u5F53\u524D\u9009\u62E9\u7684\u662F\uFF1A","dynamic.platform.opt.item.no.select.tip":"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C","setting.common.home":"\u5E73\u53F0\u9996\u9875","setting.common.apiurl":"API\u5730\u5740","setting.common.token":"\u9274\u6743token","setting.common.token.gen":"Token\u751F\u6210\u5730\u5740","setting.common.username":"\u7528\u6237\u540D","setting.common.username.gen":"\u8BBF\u95EE\u7B56\u7565\u8BBE\u7F6E","setting.common.password":"\u5BC6\u7801","setting.blog.platform.support.common":"\u60A8\u5F53\u524D\u64CD\u4F5C\u7684\u5E73\u53F0\u662F\uFF1A","platform.must.select.one":"\u54C7\u54E6\uFF0C\u79BB\u4F7F\u7528\u5C31\u5DEE\u4E00\u6B65\u5566 o(\u2565\uFE4F\u2565)o \uFF0C\u60A8\u5FC5\u987B\u542F\u7528\u81F3\u5C11\u4E00\u4E2A\u5E73\u53F0\u3002\u5982\u679C\u4E0A\u9762\u5217\u51FA\u7684\u5E73\u53F0\u6CA1\u6709\u4F60\u60F3\u8981\u7684\uFF0C\u53EF\u4EE5\u5728\u65B0\u589E\u5E73\u53F0\u52A8\u6001\u6DFB\u52A0\uFF0C\u652F\u6301Wordpress\u548CMetaweblog API\uFF08\u4F8B\u5982\u535A\u5BA2\u56ED\u3001oschina\u300151cto\u7B49\uFF09\u3002\u6709\u4EFB\u4F55\u7591\u95EE\u6B22\u8FCE\u90AE\u4EF6 youweics#163.com ","blog.list.toptip":"\u6E29\u99A8\u63D0\u793A\uFF1A\u5355\u51FB\u8868\u683C\u884C\u53EF\u4EE5\u8FDB\u5165\u6587\u7AE0\u8BE6\u60C5\u9875\uFF0C\u8BE6\u60C5\u9875\u6709\u53D1\u5E03\u6309\u94AE\u54E6! (\u3003'\u25BD'\u3003)","config.error.msg":"\u914D\u7F6E\u9519\u8BEF\uFF0C\u8BF7\u524D\u5F80\u5BF9\u5E94\u53D1\u5E03\u914D\u7F6E\u4FEE\u6539","config.platform.none":"\u6CA1\u6709\u542F\u7528\u7684\u53D1\u5E03\u5E73\u53F0\uFF0C\u8BF7\u524D\u5F80\u670D\u52A1\u5F00\u5173\u5F00\u542F","post.delete.by.platform":"\u6587\u7AE0\u5DF2\u88AB\u5E73\u53F0\u81EA\u884C\u5220\u9664\uFF0C\u8BF7\u70B9\u51FB\u53D6\u6D88\u5F3A\u5236\u89E3\u9664\u5173\u8054","blog.top-data-tip":"\u6E29\u99A8\u63D0\u793A\uFF1A1. 0.1.0+ \u4EE5\u540E\uFF0C\u53EF\u901A\u8FC7\u3010\u601D\u6E90\u5730\u5740\u3011\u6765\u4FEE\u6539\u9ED8\u8BA4\u4F3A\u670D\u914D\u7F6E\uFF0C\u652F\u6301\u672C\u5730\u548C\u8FDC\u7A0B\uFF1B\u5982\u679C\u662F\u8FDC\u7A0B\u8FD8\u9700\u8981\u8BBE\u7F6Etoken\uFF0C\u5982\u679C\u4F7F\u7528\u6D4F\u89C8\u5668\u63D2\u4EF6\u6216\u8005\u6302\u4EF6\u4E4B\u5916\u7684\u8BBF\u95EE\u65B9\u5F0F\u8FD8\u9700\u8981\u8BBE\u7F6E\u8DE8\u57DF\u8BF7\u6C42\u4EE3\u7406\u3002 2\u3001\u5347\u7EA7\u65B0\u7248\u4E4B\u524D\u5F3A\u70C8\u5EFA\u8BAE\u5BFC\u51FA\u914D\u7F6E\uFF0C\u9632\u6B62\u914D\u7F6E\u4E22\u5931\u3002 3\u3001\u5982\u679C\u51FA\u73B0\u65B0\u7248\u672C\u4E0D\u517C\u5BB9\u7684\u5F02\u5E38\u60C5\u51B5\uFF0C\u5EFA\u8BAE\u6E05\u7A7A\u914D\u7F6E\u3002\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01","blog.top-data-tip.siyuan":"\u6E29\u99A8\u63D0\u793A\uFF1A1\u3001\u5F53\u524D\u5904\u4E8E\u6302\u4EF6\u6A21\u5F0F\uFF0C\u4ECE 0.1.0 \u7248\u672C\u5F00\u59CB\uFF0C\u65E0\u9700\u5728\u6240\u6709\u9875\u9762\u5F15\u7528\u6302\u4EF6\u4E86\uFF0C\u53EA\u9700\u8981\u5728\u7236\u7EA7\u9875\u9762\u5F15\u7528\u4E00\u4E2A\u6302\u4EF6\u5373\u53EF\u3002\u5177\u4F53\u89C4\u5219\u5982\u4E0B\uFF1A(1). \u5982\u679C\u68C0\u6D4B\u5230\u6CA1\u6709\u5B50\u6587\u6863\uFF0C\u4F1A\u517C\u5BB9 0.0.3 \u7248\u672C\u4EE5\u524D\u7684\u65B9\u5F0F\uFF0C\u5C55\u793A\u5F53\u524D\u6587\u6863\u7684\u53D1\u5E03\u9875\u9762\u3002 (2). \u5982\u679C\u68C0\u6D4B\u5230\u6709\u5B50\u6587\u6863\uFF0C\u4F1A\u4EE5\u5217\u8868\u52A0\u5206\u9875\u7684\u65B9\u5F0F\u5C55\u793A\u6240\u6709\u5B50\u6587\u6863\u5217\u8868\u3002\u53EF\u5355\u72EC\u9009\u62E9\u67D0\u4E2A\u5B50\u6587\u6863\u8FDB\u884C\u53D1\u5E03\u64CD\u4F5C\u3002 2\u3001\u5347\u7EA7\u65B0\u7248\u4E4B\u524D\u5F3A\u70C8\u5EFA\u8BAE\u5BFC\u51FA\u914D\u7F6E\uFF0C\u9632\u6B62\u914D\u7F6E\u4E22\u5931\u3002 3\u3001\u5982\u679C\u51FA\u73B0\u65B0\u7248\u672C\u4E0D\u517C\u5BB9\u7684\u5F02\u5E38\u60C5\u51B5\uFF0C\u5EFA\u8BAE\u6E05\u7A7A\u914D\u7F6E\u3002\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01","blog.newwin.open":"\u65B0\u7A97\u6253\u5F00[\u63A8\u8350]","blog.change.siyuan.api":"\u601D\u6E90\u5730\u5740","setting.blog.siyuan.password":"\u601D\u6E90\u7B14\u8BB0\u9274\u6743Token\uFF0C\u8BF7\u4ECE\u3010\u8BBE\u7F6E->\u5173\u4E8E\u3011\u590D\u5236\uFF0C\u5982\u679C\u662F\u672C\u5730\u7B14\u8BB0\u7559\u7A7A\u5373\u53EF","setting.blog.siyuan.apiurl":"\u601D\u6E90\u7B14\u8BB0\u7684API\u5730\u5740\uFF0C\u5305\u62EC\u7AEF\u53E3\uFF0C\u4F8B\u5982\uFF1Ahttp://127.0.0.1:6806","setting.blog.siyuan.current.apiurl":"\u5F53\u524DAPI\u5730\u5740=>","setting.blog.middlewareUrl":"\u8DE8\u57DF\u8BF7\u6C42\u4EE3\u7406","setting.blog.middlewareUrl.tip":"\u67D0\u4E9B\u573A\u666F\u4E0B\u9700\u8981\uFF08\u4F8B\u5982Firefox\u63D2\u4EF6\u3001\u81EA\u90E8\u7F72\u6A21\u5F0F\uFF09\uFF0C\u5176\u4ED6\u60C5\u51B5\u53EF\u5FFD\u7565","setting.blog.middlewareUrl.my.tip":"\u5982\u679C\u6CA1\u6709\u90E8\u7F72\u4EE3\u7406\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6211\u7684\u5171\u4EAB\u5730\u5740\uFF1Ahttps://publish.terwer.space/api/middleware \u3002\u51FA\u4E8E\u6027\u80FD\u8003\u8651\uFF0C\u5EFA\u8BAE\u81EA\u5DF1\u90E8\u7F72\u4E00\u4EFD\u3002","setting.conf.export":"\u5BFC\u51FA\u914D\u7F6E","setting.conf.import":"\u5BFC\u5165\u914D\u7F6E","setting.conf.clear":"\u6E05\u7A7A\u914D\u7F6E"},Re={"lang.choose":"Choose lang","lang.choose.placeholder":"Please select language","theme.mode.choose":"Mode","theme.mode.dark":"Dark mode","theme.mode.light":"Light mode","service.tab.publish.service":"Publish service","service.tab.publish.setting":"Publish setting","service.tab.post.bind":"Post bind","service.tab.service.switch":"Service switch","service.tab.change.local":"Change language","main.publish.editmode":"Edit mode","main.publish.editmode.simple":"Simple","main.publish.editmode.complex":"Complex","main.publish.vuepress.tip":"Recommends use it with vuepress-theme-vdoing , and the subsequent bug will only update this theme","main.publish.github.error.tip":"Due to the API of GitHub's REST, the update cannot be treated for the time being. If you need to update, please click Delete and then add it. You can check here for the restoration progress: https: //github.com/terwer/src-sy-post -Publisher/ISSUES/21.","main.publish.github":"Send Github","main.publish.github.tip":"Checking the Markdown text of the article to the GitHub warehouse corresponding to Vuepress (need to perform related configuration first, unsatisfactory or configuration error will be ignored)","main.publish.github.choose.path":"Choose path","main.publish.github.choose.path.use.default":"Default path","main.publish.github.choose.path.use.default.tip":"Using the default directory, all articles are published in the configuration default directory, no need to select the directory every time it is published","main.publish.github.no.tip":"You have not opened github release, please copy the right text on your own","main.publish.github.choose.title":"File name","main.publish.github.choose.title.tip":"Vuepress-theme-VDoing support file name plus serial number to identify. If you don\u2019t know this usage, please do not modify the file name","main.publish.github.see.preview":"Click here see new post","main.publish.github.see.md.preview":"Click here see new md file","main.publish.github.see.real.preview":"Click here see new post","main.publish.to.wordpress":"Sendto WP","main.slug":"Post slug","main.auto.fetch.slug":"Auto fetch slug","main.use.google.translate":"Use Google translate API","main.use.hash":"Use hash","main.use.hash.tip":"Do not use HASH to show more meaningful URLs, but it may cause the only path of the article to repeat (the consequence is that Vuepress will build a failure unless manual solution to the other problem), please know","main.force.refresh":"Force refresh","main.force.refresh.tip":"In order to prevent the wrongdoing aliases by mistake, the attribute will not be updated by default. If you need to update, please check for compulsory refresh.","main.desc":"Post desc","main.auto.fetch.desc":"Auto fetch desc","main.create.time":"Pub time","main.create.time.placeholder":"Please select time","main.tag":"Post tag","main.tag.new":"New tag","main.auto.fetch.tag":"Auto fetch tag","main.tag.auto.switch":"Tag switch","main.tag.auto.switch.no.tip":"Auto tag is closed","main.cat":"Category","main.cat.empty":"No Category","main.cat.select":"Please select category","main.yaml.formatter":"YAML Formatter","main.siyuan.to.yaml":"Siyuan attr to YAML","main.yaml.to.siyuan":"YAML to Siyuan attr","main.save.attr.to.siyuan":"Save attr to Siyuan","main.copy":"Copy","main.publish":"Publish","main.publish.loading":"Publishing...","main.loading":"Loading...","main.update":"Update","main.cancel":"Cancel","main.publish.oneclick.attr":"Click to attr","main.publish.oneclick.attr.finish":"Make attr finished","main.publish.status.unpublish":"Unpublish","main.publish.status.published":"Published","main.publish.to.vuepress":"Send to Vuepress","main.publish.to.hugo":"Send to Hugo","main.publish.to.hexo":"Send to Hexo","main.publish.to.jekyll":"Send to Jekyll","main.publish.to.jvue":"Send to JVue","main.publish.to.conf":"Send to Confluence","main.publish.to.cnblogs":"Send to Cnblogs","main.publish.to.liandi":"Send to Liandi","main.publish.to.yuque":"Send to Yuque","main.publish.to.kms":"Send to KMS","main.opt.success":"Success","main.opt.failure":"Error","main.opt.quick":"Quick","main.opt.status.publish":"Post published success","main.opt.status.cancel":"Post publishing has been canceled","main.opt.loading":"Loading...","main.opt.warning":"Warning","main.opt.ok":"Confirm","main.opt.cancel":"Cancel","main.opt.warning.tip":"The operation will delete the data, whether to continue?","setting.noneed":"No need setting","setting.blog.setting":" Setting","setting.blog.type":"Blog type","setting.blog.type.placeholder":"Please select type","setting.blog.type.wordpress.value":"Wordpress","setting.blog.type.wordpress.label":"Wordpress","setting.blog.type.metaweblog.value":"MetaweblogApi","setting.blog.type.metaweblog.label":"Metaweblog API","setting.blog.type.github.value":"Github","setting.blog.type.github.label":"Github","setting.blog.type.github.user":"Github user","setting.blog.type.github.user.tip":"Github user, eg:terwer","setting.blog.type.github.repo":"Github repo","setting.blog.type.github.repo.tip":"Github repo, eg:terwer.github.io","setting.blog.type.github.token":"Github token","setting.blog.type.github.token.tip":"Github token, eg:ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","setting.blog.type.github.token.gen":"Generate Github Personal Token","setting.blog.type.github.default.path":"Doc path","setting.blog.type.github.default.path.tip":"Doc path, eg:docs/_posts","setting.blog.type.github.msg":"Commit msg","setting.blog.type.github.msg.tip":"Commit msg, eg:auto published by sy-post-publisher","setting.blog.type.github.author":"Author","setting.blog.type.github.author.tip":"Author, eg:terwer","setting.blog.type.github.email":"Email","setting.blog.type.github.email.tip":"Email","setting.blog.url":"Blog addr","setting.blog.previewUrl":"Preview rule","setting.blog.username":"Username","setting.blog.password":"Password","setting.blog.apiurl":"API Url","setting.blog.pageType":"Page Type","setting.blog.validate":"Validate","setting.blog.save":"Save","setting.blog.vali":"Validate","setting.blog.vali.tip":"Please verify the configuration to ensure the availability of the API, and it will not be used without verification.","setting.blog.vali.tip.metaweblog":"Please verify the configuration to ensure the availability of the API, and it will not be used without verification.","setting.blog.vali.ing":"Validating...","setting.blog.vali.ok":"Available","setting.blog.vali.ok.metaweblog":"The configuration has been saved and verified","setting.blog.vali.error":"Validate error","setting.blog.platform.support.metaweblog":"Current metaweblog supported platform:","setting.blog.cancel":"Cancel","setting.vuepress":"Vuepress","setting.hugo":"Hugo","setting.hexo":"Hexo","setting.jekyll":"Jekyll","setting.jvue":"JVue","setting.conf":"Confluence","setting.conf.tip":"Published to Confluence needs to cooperate with my other adapter project (strong recommendation), please refer to:https://github.com/terwer/node-metaweblog-api-adaptor","setting.cnblogs":"Cnblogs","setting.wordpress":"Wordpress","setting.liandi":"Liandi","setting.yuque":"Yuque","setting.kms":"KMS","setting.other1":"Other1","service.switch.vuepress":"Vuepress","service.switch.hugo":"Hugo","service.switch.hexo":"Hexo","service.switch.jekyll":"Jekyll","service.switch.jvue":"JVue","service.switch.conf":"Confluence","service.switch.cnblogs":"Cnblogs","service.switch.wordpress":"Wordpress","service.switch.yuque":"Yuque","service.switch.liandi":"Liandi","service.switch.wechat":"WeChat","service.switch.wemp":"WeMedia","service.switch.zhihu":"Zhihu","service.switch.kms":"LandrayKms","service.switch.must.select.one":"You must add at least one platform","post.bind.vuepress.slug":"Vuepress slug","post.bind.hugo.slug":"Hugo slug","post.bind.hexo.slug":"Hexo slug","post.bind.jekyll.slug":"Jekyll slug","post.bind.cnblogs.postid":"Cnblogs ID","post.bind.jvue.postid":"JVue ID","post.bind.conf.postid":"Conf ID","post.bind.wordpress.postid":"WP ID","post.bind.liandi.postid":"Liandi ID","post.bind.yuque.postid":"Yuque ID","post.bind.kms.postid":"KMS ID","post.bind.conf.save":"Save","post.bind.conf.cancel":"Cancel","form.validate.name.required":"Please input name","form.validate.name.length":"Length should be 0 to 1","form.validate.github.auto.delete":"Auto delete","dynamic.platform.new":"New platform","dynamic.platform.tip":"If the built -in release service cannot be satisfied or multiple instances need to be added, you can add supporting platforms here. Currently supporting Metaweblog API and WordPress API","dynamic.platform.type":"Platform type","dynamic.platform.subtype":"Platform subtype","dynamic.platform.type.metaweblog":"metaweblog API","dynamic.platform.type.wordpress":"Wordpress","dynamic.platform.type.custom":"Custom","dynamic.platform.key":"Platform key","dynamic.platform.key.tip":"The unique logo of the platform, cannot be repeated, for example: myblog","dynamic.platform.type.github":"Github","dynamic.platform.name":"Platform name","dynamic.platform.name.tip":"Platform name, for example: my blog","dynamic.platform.opt.add":"Submit","dynamic.platform.opt.noselect":"Please select platform type","dynamic.platform.opt.key.exist":"Platform key exists","dynamic.platform.opt.del.select":"Delete selected","dynamic.platform.opt.del.confirm":"Deleting this platform will completely remove the relevant configuration information of this platform. Do you continue?","dynamic.platform.opt.item.select":"Item no select","dynamic.platform.opt.item.select.tip":"The current selection is:","dynamic.platform.opt.item.no.select.tip":"Please select the line to be deleted","setting.common.home":"Home","setting.common.apiurl":"API","setting.common.token":"Token","setting.common.token.gen":"Token addr","setting.common.username":"Username","setting.common.username.gen":"Username setting","setting.common.password":"Password","setting.blog.platform.support.common":"Current platform\uFF1A","platform.must.select.one":"You must enable at least one platform","blog.list.toptip":"Reminder: Click the table line to enter the article details page. The details page has the release button! (\u3003'\u25BD'\u3003)","config.error.msg":"Network or config error, no data fetched","config.platform.none":"No available platform, please go to switch","post.delete.by.platform":"The article has been deleted by the platform by itself, please click to cancel the compulsory lifting connection","blog.top-data-tip":"Reminder: Please ensure that the Siyuan notes are started and opened the servo. The default servo address: http://127.0.0.0.1: 6806.0.0. Note: The modification will cover the value of the startup setting.","blog.top-data-tip.siyuan":"It is currently in the pendant mode. Starting from version 0.1.0, there is no need to reference the pendant on all pages. You only need to reference a pendant on the parent page. The specific rules are as follows: 1. If there are no subsidiaries, it will be compatible with the previous method of version 0.0.3 to display the release page of the current document. 2. If a subsidiary document is detected, all the subsidiaries will be displayed in a list and paging. You can choose a sub -document separately for release operations.","blog.newwin.open":"Open in a new window","blog.change.siyuan.api":"Modify Siyuan API address","setting.blog.siyuan.password":"Siyuan Note token, please copying from\u3010set up-> about \u3011","setting.blog.siyuan.apiurl":"The API address of Siyuan Note, including ports, for example: http://127.0.0.0.1: 6806","setting.blog.siyuan.current.apiurl":"Current apiUrl=>","setting.conf.export":"Export config","setting.conf.import":"Import config","setting.conf.clear":"Clear config"},Ne=Fe({legacy:!1,locale:"zh_CN",fallbackLocale:"en_US",messages:{zh_CN:Le,en_US:Re}});console.log("Register vue-hljs success");class xe{constructor(e={}){self.hook=e.hook,self.callback=e.callback}"after:highlightElement"({el:e,text:t}){const u=Object.assign(document.createElement("button"),{innerHTML:"Copy",className:"hljs-copy-button"});u.dataset.copied=!1,e.parentElement.classList.add("hljs-copy-wrapper"),e.parentElement.appendChild(u),e.parentElement.style.setProperty("--hljs-theme-background",window.getComputedStyle(e).backgroundColor),u.onclick=function(){if(!navigator.clipboard)return;let s=t;hook&&typeof hook=="function"&&(s=hook(t,e)||t),navigator.clipboard.writeText(s).then(function(){u.innerHTML="\u590D\u5236\u6210\u529F",u.dataset.copied=!0;let i=Object.assign(document.createElement("div"),{role:"status",className:"hljs-copy-alert",innerHTML:"\u590D\u5236\u5230\u526A\u8D34\u677F"});e.parentElement.appendChild(i),setTimeout(()=>{u.innerHTML="Copy",u.dataset.copied=!1,e.parentElement.removeChild(i),i=null},2e3)}).then(function(){if(typeof callback=="function")return callback(s,e)})}}}const Ye=o=>(o=""+o,o.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")),ho=(o,e,t)=>{const u=o;return u.length<e?u:t===!0?u.substring(0,e):u.substring(0,e)+"..."},Ve=o=>o.substring(0,1).toUpperCase()+o.substring(1).toLowerCase(),S=(...o)=>o.join(""),Lt=(o,e)=>{const t=N(o);return t.trim().length==0?e:t},N=o=>{let e="";try{({VITE_LOG_INFO_ENABLED:"false",VITE_SIYUAN_API_URL:"http://127.0.0.1:6806",VITE_SIYUAN_CONFIG_TOKEN:"",VITE_MIDDLEWARE_URL:"https://publish.terwer.space/api/middleware",BASE_URL:"/widgets/sy-post-publisher/",MODE:"production",DEV:!1,PROD:!0})[o]&&(e={VITE_LOG_INFO_ENABLED:"false",VITE_SIYUAN_API_URL:"http://127.0.0.1:6806",VITE_SIYUAN_CONFIG_TOKEN:"",VITE_MIDDLEWARE_URL:"https://publish.terwer.space/api/middleware",BASE_URL:"/widgets/sy-post-publisher/",MODE:"production",DEV:!1,PROD:!0}[o])}catch(t){throw new Error(t)}return e},Ge=o=>{let e=!1;return N(o)&&(e=N(o).toLowerCase()==="true"),e},R=()=>typeof window<"u"&&typeof window.document<"u",Rt=o=>{if(!R())return"";const t=window.location.search.substring(1).split("&");for(let u=0;u<t.length;u++){const s=t[u].split("=");if(s[0]===o)return s[1]}return""},Me=(o,e,t)=>{t==null&&(t="");const u=new RegExp("\\b("+e+"=).*?(&|#|$)");return o.search(u)>=0?o.replace(u,"$1"+t+"$2"):(o=o.replace(/[?#]$/,""),o+(o.indexOf("?")>0?"&":"?")+e+"="+t)},qe=(o,e,t)=>R()?o.includes(e)?Me(o,e,t):(o+=(o.match(/[?]/g)!=null?"&":"?")+e+"="+t,o):"",je=()=>{setTimeout(function(){R()&&window.location.reload()},200)},We=async()=>await ve({description:"JSON files",mimeTypes:["application/json"],extensions:[".json"],multiple:!0}),O={gray:o=>o.toString(),green:o=>o.toString(),yellow:o=>o.toString(),red:o=>o.toString()};R()?console.log("loglevel\u8FD0\u884C\u5728\u6D4F\u89C8\u5668\u73AF\u5883\u4E2D"):console.log("loglevel\u8FD0\u884C\u5728node\u73AF\u5883\u4E2D");var It;const He=(It=Ge("VITE_LOG_INFO_ENABLED"))!=null?It:!1,Nt="INFO",xt="WARN",Xe="ERROR",Je="console";Ot.reg(ut);ut.setLevel(He?Nt:xt);Ot.apply(ut,{format(o,e,t){const u=[];switch(u.push(O.gray("[")+O.green(t).toString()+O.gray("]")),o){case Nt:u.push(O.green(o.toUpperCase().toString()));break;case xt:u.push(O.yellow(o.toUpperCase().toString()));break;case Xe:u.push(O.red(o.toUpperCase().toString()));break}return u.push(O.green(e).toString()),u.push(O.gray(":")),u.join(" ")}});const Ke=o=>ut.getLogger(o!=null?o:Je),F={getLogger:Ke},x=F.getLogger(),Yt=o=>{const e=localStorage.getItem(o);return e||""},mo=o=>{const t=Yt(o).toLowerCase()==="true";return x.debug("\u4ECElocalStorage\u83B7\u53D6Boolean\u6570\u636E=>"),x.debug(t),t};function V(o){let e={};const t=Yt(o);if(t!=="")try{e=JSON.parse(t)}catch(u){throw x.error("JSON\u683C\u5F0F\u4E0D\u6B63\u786E",u),u}return x.debug("\u4ECElocalStorage\u83B7\u53D6JSON\u6570\u636E=>"),x.debug(e),e}const Vt=(o,e)=>{if(!e||e===""){x.warn("\u7A7A\u503C\uFF0C\u4E0D\u4FDD\u5B58");return}localStorage.setItem(o,e)},Eo=(o,e)=>{const t=e.toString();Vt(o,t)},dt=(o,e)=>{const t=JSON.stringify(e);Vt(o,t)},Fo=o=>{let e=!1;for(let t=0;t<localStorage.length;t++){const u=localStorage.key(t);if(o===u){e=!0;break}}return e},$e=()=>{const o={};for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e),u=localStorage.getItem(t);o[t]=u}return o},ze=()=>{const o=$e(),e=JSON.stringify(o),t=new Blob([e],{type:"application/json"}),u=document.createElement("a");u.download="data.json",u.href=URL.createObjectURL(t),document.body.appendChild(u),u.click()},Qe=async()=>{try{await du(),q.success("\u5BFC\u5165\u6210\u529F")}catch(o){x.error("\u914D\u7F6E\u6587\u4EF6\u89E3\u6790\u9519\u8BEF=>",o),q.error("\u914D\u7F6E\u6587\u4EF6\u89E3\u6790\u9519\u8BEF=>"+o)}},Ze=()=>{localStorage.clear(),localStorage.length===0?console.log("LocalStorage is empty"):console.log("LocalStorage is not empty")},tu="siyuan-cfg",eu=!1,Gt={SIYUAN_CFG_KEY:tu,DEBUG_SIYUAN_SUBDOC:eu};function uu(o){if(typeof Lute>"u")return o;const e=Lute.New(),t={};return e.SetJSRenderers({renderers:{Md2HTML:t}}),e.MarkdownStr("",o)}function Mt(o){return uu(o)}const bo=o=>{let e=o;const t=/([0-9]*)\./g;return e=e.replace(t,""),e},st=o=>{let e=o.toString();const t=/<iframe.*src="\/widgets\/publisher.*<\/iframe>/g;e=e.replace(t,"");const u=/<iframe.*src="\/widgets\/sy-post-publisher.*<\/iframe>/g;e=e.replace(u,"");const s=/<iframe.*\/widgets\/Note*\sAttrs.*\/iframe>/g;e=e.replace(s,"");const i=/<h1.*\/h1>/g;return e=e.replace(i,""),e},fo=o=>{let e=o.toString();const t=/(?:^|\n)#\s[0-9]+.*/g;return e=e.replace(t,""),e=st(e),e},qt=o=>{o=o.replace(/<style((.|\n|\r)*?)<\/style>/g,""),o=o.replace(/<script((.|\n|\r)*?)<\/script>/g,""),o=o.replace(/<[^>]*>/g,""),o=o.replace(/&.*;/g,""),o=o.replace(/(^\s*)|(\s*$)/g,""),o=o.replace(/</g,"").replace(/>/g,""),o=o.replace(/"/g,"").replace(/'/g,""),o=o.replace(/\*/g,""),o=o.replace(/\$/g,""),o=o.replace(/\./g,""),o=o.replace(/\+/g,""),o=o.replace(/\s+/g,""),o=o.replace(/[:|：]/g,"_"),o=o.replace(/[;|；]/g,"_");const e=["\\d*/\\d/\\d*","[\u3001|\\\\]","[\uFF0C|,]","\\d","/","-"];for(let t=0;t<e.length;t++){const u=new RegExp(e[t],"g");o=o.replaceAll(u,"")}return o=o.toLowerCase(),o},wo=(o,e,t)=>{const u=qt(o);return u.length<e?u:t===!0?u.substring(0,e):u.substring(0,e)+"..."},su=o=>{const e=Mt(o);return st(e)},ou=o=>{let e=su(o);return e=st(e),qt(e)},iu=10,au=255,ru="dynamic-config",nu=5,ht={MAX_TITLE_LENGTH:iu,MAX_PREVIEW_LENGTH:au,DYNAMIC_CONFIG_KEY:ru,DEFAULT_JIEBA_WORD_LENGTH:nu},K=F.getLogger(),Co=async o=>{let u=(await(await fetch("https://api.terwer.space/api/translate?q="+o)).json())[0][0];return u=u.replaceAll(/-/g,""),u=u.replaceAll(/~/g,""),u=Ut(u),u=u.replaceAll(/@/g,""),u},yo=async o=>Ut(o),Ao=async o=>{o=ou(o),K.debug("\u51C6\u5907\u5F00\u59CB\u5206\u8BCD\uFF0C\u539F\u6587=>",o);const t=await(await fetch("https://api.terwer.space/api/jieba?q="+o)).json();return K.debug("\u5206\u8BCD\u5B8C\u6BD5\uFF0C\u7ED3\u679C=>",t.result),t.result};function Pt(o,e){const t=["\u9875\u9762"];K.debug("\u6587\u672C\u6E05\u6D17\uFF0C\u7EDF\u8BA1\uFF0C\u6392\u5E8F\uFF0C\u53BB\u9664\u65E0\u610F\u4E49\u7684\u5355\u8BCDunUseWords=>",t);const u=o.reduce(function(i,a){return a.length===1||t.includes(a)?(i[a]=0,i):(i[a]=i.hasOwnProperty(a)?parseInt(i[a])+1:1,i)},{}),s=Object.keys(u).sort(function(i,a){return u[a]-u[i]});return K.debug("\u6587\u672C\u6E05\u6D17\u7ED3\u675Fwordarr=>",s),!e||e===0?s:s.slice(0,e)}function Do(o,e){let t;const u=ht.DEFAULT_JIEBA_WORD_LENGTH;return e?t=Pt(o,e):t=Pt(o,u),K.debug("jiebaToHotWords=>",t),t}const jt=o=>o?Object.getPrototypeOf(o)===Object.prototype&&Object.getOwnPropertyNames(o).length===0&&Object.getOwnPropertySymbols(o).length===0:!0,D=o=>!o||typeof o!="string"?!0:o.trim().length===0,U=(o,e)=>{let t=o;const u=o.lastIndexOf("/");return u+1===o.length&&(t=o.substring(0,u)),e.indexOf("/")>0?t=t+"/"+e:t=t+e,t};class Wt{constructor(e,t,u){l(this,"baseUrl");l(this,"token");l(this,"middlewareUrl");this.baseUrl=e,this.token=t,this.middlewareUrl=u}}const Ht=()=>{let o=N("VITE_SIYUAN_API_URL"),e=N("VITE_SIYUAN_CONFIG_TOKEN"),t=N("VITE_MIDDLEWARE_URL");const u=V(Gt.SIYUAN_CFG_KEY);return D(u.baseUrl)||(o=u.baseUrl),D(u.token)||(e=u.token),D(u.middlewareUrl)?t="/api/middleware":t=u.middlewareUrl,new Wt(o,e,t)};class Xt{constructor(){l(this,"logger",F.getLogger("utils/platform/siyuan/siYuanApi.ts"))}async getRootBlocksCount(e){const t=`SELECT COUNT(DISTINCT b1.root_id) as count
        FROM blocks b1
        WHERE 1 = 1
        AND ((b1.content LIKE '%${e}%') OR (b1.tag LIKE '%${e}%')
    )`,u=await this.sql(t);return this.logger.debug("getRootBlocksCount data=>",u[0].count),u[0].count}async getRootBlocks(e,t,u){const s=`select DISTINCT b2.root_id,b2.parent_id,b2.content from blocks b2 
        WHERE 1==1
        AND b2.id IN (
             SELECT DISTINCT b1.root_id
                FROM blocks b1
                WHERE 1 = 1
                AND ((b1.content LIKE '%${u}%') OR (b1.tag LIKE '%${u}%'))
                ORDER BY b1.updated DESC,b1.created DESC LIMIT ${e*t},${t}
        )
        ORDER BY b2.updated DESC,b2.created DESC`;return await this.sql(s)}async getSubdocCount(e){const t=`SELECT COUNT(DISTINCT b1.root_id) AS count
        FROM blocks b1
        WHERE b1.path LIKE '%/${e}%'`;return(await this.sql(t))[0].count}async getSubdocs(e,t,u,s){const i=`SELECT DISTINCT b2.root_id,b2.content,b2.path FROM blocks b2
        WHERE b2.id IN (
          SELECT DISTINCT b1.root_id
             FROM blocks b1
             WHERE b1.path like '%/${e}%'
             AND ((b1.content LIKE '%${s}%') OR (b1.tag LIKE '%${s}%'))
             ORDER BY b1.updated DESC,b1.created DESC LIMIT ${t*u},${u}
        )
        ORDER BY b2.content,b2.updated DESC,b2.created DESC,id`;return this.logger.debug("siyuanApi getSubdocs sql=>",i),await this.sql(i)}async getBlockByID(e){const t=`select *
                from blocks
                where id = '${e}'`,u=await this.sql(t);if(!u||u.length===0)throw new Error("\u901A\u8FC7ID\u67E5\u8BE2\u5757\u4FE1\u606F\u5931\u8D25");return u[0]}async getBlockBySlug(e){const t=`select root_id from attributes 
               where name='custom-slug' and value='${e}' 
               limit 1`;return(await this.sql(t))[0]}async exportMdContent(e){const t={id:e},u="/api/export/exportMdContent";return await this.siyuanRequest(u,t)}async getBlockAttrs(e){const t={id:e},u="/api/attr/getBlockAttrs";return await this.siyuanRequest(u,t)}async setBlockAttrs(e,t){const u="/api/attr/setBlockAttrs";return await this.siyuanRequest(u,{id:e,attrs:t})}async getDoc(e){const t={id:e,k:"",mode:2,size:36},u="/api/filetree/getDoc";return await this.siyuanRequest(u,t)}async sql(e){const t={stmt:e},u="/api/query/sql";return await this.siyuanRequest(u,t)}async siyuanRequest(e,t,u,s){const i=Ht();i.baseUrl!==""&&(e=S(i.baseUrl,e));let a="POST";u!=null&&(a=u);const r={body:JSON.stringify(t),method:a};s&&Object.assign(r,{headers:{Authorization:`Token ${i.token}`}}),this.logger.debug("\u5F00\u59CB\u5411\u601D\u6E90\u8BF7\u6C42\u6570\u636E\uFF0Curl=>",e),this.logger.debug("\u5F00\u59CB\u5411\u601D\u6E90\u8BF7\u6C42\u6570\u636E\uFF0CfetchOps=>",r);const c=await(await fetch(e,r)).json();if(this.logger.debug("\u601D\u6E90\u8BF7\u6C42\u6570\u636E\u8FD4\u56DE\uFF0CresJson=>",c),c.code===-1)throw new Error(c.msg);return c.code===0?c.data:null}}const J=F.getLogger("utils/platform/siyuan/siyuanUtil.ts"),Y=()=>{if(window.frameElement==null||window.frameElement.parentElement==null||window.frameElement.parentElement.parentElement==null)return{isInSiyuan:!1,widgetId:""};const o=window.frameElement.parentElement.parentElement;if(!o)return{isInSiyuan:!1,widgetId:""};const e=o.getAttribute("data-node-id");return e?{isInSiyuan:!0,widgetId:e}:{isInSiyuan:!1,widgetId:""}},ct=()=>Y().isInSiyuan,lu=async o=>{const e=Y();if(!e.isInSiyuan)return;const t=e.widgetId;J.debug("\u83B7\u53D6\u6302\u4EF6\u7684widgetId=>",t);const u=V(t);if(!o&&u)return J.debug("\u83B7\u53D6\u672C\u5730\u7F13\u5B58\u7684\u601D\u6E90\u7B14\u8BB0\u9875\u9762\u4FE1\u606F\uFF08\u4E0D\u662F\u5B9E\u65F6\u7684\uFF09=>",u),u;const i=await new Xt().getBlockByID(t);return i&&(dt(t,i),J.debug("\u8C03\u7528API\u8BBE\u7F6E\u67E5\u8BE2\u601D\u6E90\u9875\u9762\u4FE1\u606F\u5E76\u66F4\u65B0\u672C\u5730\u7F13\u5B58",i)),i},cu=async o=>{const e=await lu(o);if(!e)return;const t=e.root_id;return J.debug("\u83B7\u53D6\u601D\u6E90\u7B14\u8BB0\u9875\u9762ID=>",t),t},Bo=async(o,e)=>{let t;if(e&&(J.debug("\u663E\u793A\u6307\u5B9ApageId=>",e),t=e),t||Y().isInSiyuan&&(t=await cu(o)),!t){if(R()){const u=Rt("id");u!==""&&(t=u)}if(!t){const u=N("VITE_SIYUAN_DEV_PAGE_ID");u&&(t=u)}}return t};function gu(){return typeof InstallTrigger<"u"}const St=F.getLogger();function Jt(o,e){let t=o;if(t.startsWith("http")||t.startsWith("https"))return St.info("\u5F53\u524D\u662F\u5916\u90E8\u94FE\u63A5\uFF0C\u76F4\u63A5\u8DF3\u8F6C"),t;if(typeof chrome.runtime<"u")t=chrome.runtime.getURL(t);else{const u=Rt("from");(ct()||u==="siyuan")&&(t="/widgets/sy-post-publisher"+t,t=qe(t,"from","siyuan"));let s=window.location.protocol+"//"+window.location.host;e&&e!==""&&(s=window.location.protocol+"//"+window.location.host+e),t=U(s,t)}return St.warn("\u5C06\u8981\u6253\u5F00\u9875\u9762=>",t),t}function Kt(o){const e=Jt(o,"");window.open(e)}function pu(o,e,t){const u=Jt(o,t);e==="_self"?window.location.href=u:window.open(u)}function B(){return!R()||gu()?!1:!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime)}async function $t(o){return await new Promise(e=>{chrome.runtime.sendMessage(o,e)})}const du=async()=>{const o=await We(),e=new FileReader;e.addEventListener("load",()=>{const t=JSON.parse(e.result);console.log("\u51C6\u5907\u5BFC\u5165\u914D\u7F6E\uFF0C\u8BFB\u53D6\u5230\u7684\u914D\u7F6E\u6570\u636E\u4E3A=>",t);for(const[u,s]of Object.entries(t))localStorage.setItem(u,s)}),e.readAsText(o[0])},zt={};zt.install=o=>{f.registerLanguage("javascript",yt),f.registerLanguage("js",yt),f.registerLanguage("typescript",At),f.registerLanguage("ts",At),f.registerLanguage("c",_e),f.registerLanguage("cpp",Pe),f.registerLanguage("java",at),f.registerLanguage("csharp",at),f.registerLanguage("cs",at),f.registerLanguage("bash",Dt),f.registerLanguage("shell",Dt),f.registerLanguage("xml",Bt),f.registerLanguage("html",Bt),f.registerLanguage("css",Se),f.registerLanguage("plaintext",Te),f.addPlugin(new xe({callback:(e,t)=>console.log("Copied to clipboard",e)})),o.directive("highlight",e=>{const t=e.querySelectorAll("pre code");Array.prototype.forEach.call(t,f.highlightBlock),e.querySelectorAll("code-group").forEach(r=>{var n;if(r.getElementsByTagName("ul").length===0){const c=document.createElement("ul");c.setAttribute("class","code-tab");const g=r.querySelectorAll("code-block");g.forEach(h=>{var Q,Z;const b=(Q=h.attributes.getNamedItem("title"))==null?void 0:Q.value,ot=((Z=h.attributes.getNamedItem("active"))==null?void 0:Z.value)!==void 0,M=document.createElement("li");M.setAttribute("class",ot?"code-tab-item current":"code-tab-item"),M.innerHTML=b||"",M.addEventListener("click",function(it){const d=it.target;d.parentElement.querySelectorAll("li").forEach(C=>{C.setAttribute("class","code-tab-item")}),d.setAttribute("class","code-tab-item current"),g.forEach(C=>{var I;((I=C.attributes.getNamedItem("title"))==null?void 0:I.value)===d.innerHTML?C.setAttribute("active",""):C.removeAttribute("active")})}),c.append(M)});const p=g[0];(n=p==null?void 0:p.parentNode)==null||n.insertBefore(c,p)}}),e.querySelectorAll("div.language-plantuml").forEach(r=>{var b;const n=Ye(r.innerHTML),c=Ie.encode(n),p=({VITE_LOG_INFO_ENABLED:"false",VITE_SIYUAN_API_URL:"http://127.0.0.1:6806",VITE_SIYUAN_CONFIG_TOKEN:"",VITE_MIDDLEWARE_URL:"https://publish.terwer.space/api/middleware"}.PLANT_UML_SERVR||"https://www.plantuml.com/plantuml/svg/")+c,h=document.createElement("img");h.setAttribute("src",p),(b=r==null?void 0:r.parentNode)==null||b.insertBefore(h,r),r.remove()}),e.querySelectorAll("span.language-math").forEach(r=>{if(B()){let n=r.innerHTML;n=n.replace(/，/g,","),n=n.replace(/。/g,"."),n=n.replace(/并且/g,"AND"),n=n.replace(/或者/g,"OR"),n=encodeURIComponent(n);const c='<img src="https://latex.codecogs.com/svg.image?'+n+'" />';r.innerHTML=c}else{const n="$"+r.innerHTML+"$";r.innerHTML=n}}),e.querySelectorAll("div.language-math").forEach(r=>{if(B()){let n=r.innerHTML;n=n.replace(/，/g,","),n=n.replace(/。/g,"."),n=n.replace(/并且/g,"AND"),n=n.replace(/或者/g,"OR"),n=encodeURIComponent(n);const c='<img src="https://latex.codecogs.com/svg.image?'+n+'" />';r.innerHTML=c}else{const n="$$"+r.innerHTML+"$$";r.innerHTML=n}}),B()||MathJax.typeset()})};const hu=F.getLogger("plugins/page-beauty/page-beauty.ts"),mu={install(o){o.directive("beauty",e=>{hu.info("PageBeauty is rendering ..."),e.querySelectorAll("a").forEach(u=>{u.addEventListener("click",function(s){s.preventDefault();const i=u.getAttribute("href");D(i)||Kt(i)})})})}},Eu=o=>{const e=ie({render:()=>ae(o)}),t=Ee();return e.use(t),e.use(Ne),e.use(zt),e.use(mu),e.directive("focus",{mounted(u){u.focus()}}),e},_o={createPage:Eu};const mt=(o,e)=>{const t=o.__vccOpts||o;for(const[u,s]of e)t[u]=s;return t},Fu={},bu={class:"header-default"},fu={class:"header-title-default"};function wu(o,e){const t=kt,u=fe;return j(),X("div",bu,[A(u,null,{default:P(()=>[w("h1",fu,[A(t,{class:"header-title-btn disabled-click"},{default:P(()=>[nt(" \u601D\u6E90\u7B14\u8BB0\u53D1\u5E03\u5DE5\u5177 ")]),_:1})])]),_:1})])}const Cu=mt(Fu,[["render",wu],["__scopeId","data-v-f818a539"]]),yu="0.1.0",$=o=>(ce("data-v-acb9e2d1"),o=o(),ge(),o),Au={class:"footer"},Du=$(()=>w("span",{class:"text"}," \xA92011-2022 ",-1)),Bu={class:"text"},_u={key:0,class:"text"},Pu=$(()=>w("span",{class:"text"},".",-1)),Su=$(()=>w("span",{class:"text"},".",-1)),Tu=$(()=>w("span",{class:"text"},".",-1)),Iu=$(()=>w("span",{class:"text"},".",-1)),vu={class:"dialog-footer"},ku=gt({__name:"DefaultFooter",setup(o){const e=F.getLogger("layouts/default/DefaultFooter"),{t}=be(),u=re(),s=ne(u),i=tt(!1),a=tt("0.0.3"),r="140px",n=tt(!1),c=tt(),g=wt({apiUrl:"http://127.0.0.1:6806",pwd:"",middlewareUrl:""}),p=wt({apiUrl:[{required:!0,message:()=>t("form.validate.name.required")}],pwd:[{required:!1,message:()=>t("form.validate.name.required")}]}),h=()=>{window.open("https://github.com/terwer/src-sy-post-publisher")},b=()=>{Kt("/blog/index.html")},T=()=>{ze()},ot=async()=>{await Qe()},M=()=>{Ce.confirm(t("main.opt.warning.tip"),t("main.opt.warning"),{confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel"),type:"warning"}).then(async()=>{Ze(),je(),q.success(t("main.opt.success"))}).catch(()=>{})},Q=()=>{n.value=!0},Z=async d=>{if(!(!d||!await d.validate((C,I)=>{C?e.debug("\u6821\u9A8C\u6210\u529F"):(e.error(t("main.opt.failure"),I),q.error(t("main.opt.failure")))})))try{const C=new Wt(g.apiUrl,g.pwd,g.middlewareUrl);dt(Gt.SIYUAN_CFG_KEY,C),e.debug("\u4FDD\u5B58\u601D\u6E90\u914D\u7F6E",C),q.success(t("main.opt.success")),setTimeout(function(){n.value=!1,pu("/blog/index.html","_self","")},500)}catch(C){n.value=!1,q.error(t("main.opt.failure")),e.error(t("main.opt.failure"),C)}},it=()=>{i.value=ct(),a.value=yu;const d=Ht();g.apiUrl=d.baseUrl,g.pwd=d.token,g.middlewareUrl=d.middlewareUrl,e.debug("\u521D\u59CB\u5316\u601D\u6E90\u914D\u7F6E",d)};return le(()=>{ct()?e.warn("\u606D\u559C\u4F60\uFF0C\u6B63\u5728\u4EE5\u6302\u4EF6\u6A21\u5F0F\u8FD0\u884C"):e.warn("\u6B63\u5728\u4EE5\u975E\u6302\u4EF6\u6A21\u5F0F\u8FD0\u884C\uFF0C\u90E8\u5206\u529F\u80FD\u5C06\u901A\u8FC7\u8BF7\u6C42\u4EE3\u7406\u7684\u65B9\u5F0F\u8FDB\u884C\u6A21\u62DF\uFF0C\u8BF7\u77E5\u6089"),it()}),(d,m)=>{const C=ye,I=Ae,te=De,ee=Be,ft=kt,ue=we;return j(),X("div",null,[w("div",Au,[w("div",null,[Du,w("span",{class:"s-dark",onClick:m[0]||(m[0]=y=>h())}," sy-post-publisher "),w("span",Bu," v"+v(a.value)+" . ",1),w("span",{class:"text s-dark",onClick:m[1]||(m[1]=y=>lt(s)())},v(lt(u)?d.$t("theme.mode.light"):d.$t("theme.mode.dark")),1),i.value?Ct("",!0):(j(),X("span",_u,".")),i.value?Ct("",!0):(j(),X("span",{key:1,class:"text s-dark",onClick:m[2]||(m[2]=y=>Q())},v(d.$t("blog.change.siyuan.api")),1)),Pu,w("span",{class:"text s-dark",onClick:m[3]||(m[3]=y=>T())},v(d.$t("setting.conf.export")),1),Su,w("span",{class:"text s-dark",onClick:m[4]||(m[4]=y=>ot())},v(d.$t("setting.conf.import")),1),Tu,w("span",{class:"text s-dark",onClick:m[5]||(m[5]=y=>M())},v(d.$t("setting.conf.clear")),1),Iu,w("span",{class:"text s-dark",onClick:m[6]||(m[6]=y=>b())},v(d.$t("blog.newwin.open")),1),A(ue,{modelValue:n.value,"onUpdate:modelValue":m[12]||(m[12]=y=>n.value=y),title:d.$t("blog.change.siyuan.api")},{footer:P(()=>[w("span",vu,[A(ft,{onClick:m[10]||(m[10]=y=>n.value=!1)},{default:P(()=>[nt(v(d.$t("main.opt.cancel")),1)]),_:1}),A(ft,{type:"primary",onClick:m[11]||(m[11]=y=>Z(c.value))},{default:P(()=>[nt(v(d.$t("main.opt.ok")),1)]),_:1})])]),default:P(()=>[A(ee,{ref_key:"siyuanApiSettingFormRef",ref:c,model:g,rules:p},{default:P(()=>[A(I,{label:d.$t("setting.blog.apiurl"),"label-width":r,prop:"apiUrl"},{default:P(()=>[A(C,{modelValue:g.apiUrl,"onUpdate:modelValue":m[7]||(m[7]=y=>g.apiUrl=y),autocomplete:"off",placeholder:d.$t("setting.blog.siyuan.apiurl")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),A(I,{label:d.$t("setting.blog.password"),"label-width":r,prop:"pwd"},{default:P(()=>[A(C,{modelValue:g.pwd,"onUpdate:modelValue":m[8]||(m[8]=y=>g.pwd=y),type:"password",autocomplete:"off",placeholder:d.$t("setting.blog.siyuan.password"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),A(I,{label:d.$t("setting.blog.middlewareUrl"),"label-width":r,prop:"middlewareUrl"},{default:P(()=>[A(C,{modelValue:g.middlewareUrl,"onUpdate:modelValue":m[9]||(m[9]=y=>g.middlewareUrl=y),autocomplete:"off",placeholder:d.$t("setting.blog.middlewareUrl.tip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),A(I,null,{default:P(()=>[A(te,{class:"top-data-tip middleware-tip",title:d.$t("setting.blog.middlewareUrl.my.tip"),type:"success",closable:!1},null,8,["title"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])])])}}});const Ou=mt(ku,[["__scopeId","data-v-acb9e2d1"]]),Uu={id:"app-layout-default"},Lu={class:"default-main"},Ru=gt({__name:"AppLayoutDefault",setup(o){return(e,t)=>(j(),X("div",Uu,[A(Cu),w("div",Lu,[vt(e.$slots,"default",{},void 0,!0)]),A(Ou)]))}});const Nu=mt(Ru,[["__scopeId","data-v-daa4119e"]]),Po=gt({__name:"AppLayout",setup(o){const e=pe(Nu);return(t,u)=>(j(),de(he(lt(e)),null,{default:P(()=>[vt(t.$slots,"default")]),_:3}))}}),xu="publish",Yu="draft",Vu="inherit",k={POST_STATUS_PUBLISH:xu,POST_TYPE_DRAFT:Yu,POST_TYPE_INHERIT:Vu};class L{constructor(){l(this,"postid");l(this,"title");l(this,"mt_keywords");l(this,"link");l(this,"permalink");l(this,"shortDesc");l(this,"description");l(this,"mt_excerpt");l(this,"wp_slug");l(this,"dateCreated");l(this,"categories");l(this,"cate_slugs");l(this,"mt_text_more");l(this,"post_status");l(this,"wp_password");this.postid="",this.title="",this.mt_keywords="",this.permalink="",this.description="",this.wp_slug="",this.dateCreated=new Date,this.categories=[],this.cate_slugs=[],this.post_status=k.POST_STATUS_PUBLISH,this.wp_password=""}}class G{constructor(){l(this,"blogid");l(this,"url");l(this,"blogName");l(this,"isAdmin");l(this,"xmlrpc");this.blogid="",this.url="",this.blogName=""}}const Gu="vuepress",Mu="hugo",qu="hexo",ju="jekyll",Wu="jvue",Hu="confluence",Xu="cnblogs",Ju="wordpress",Ku="liandi",$u="yuque",zu="kms",Qu="wechat",Zu="siyuan",E={API_TYPE_VUEPRESS:Gu,API_TYPE_HUGO:Mu,API_TYPE_HEXO:qu,API_TYPE_JEKYLL:ju,API_TYPE_CNBLOGS:Xu,API_TYPE_WORDPRESS:Ju,API_TYPE_CONFLUENCE:Hu,API_TYPE_JVUE:Wu,API_TYPE_YUQUE:$u,API_TYPE_WECHAT:Qu,API_TYPE_LIANDI:Ku,API_TYPE_SIYUAN:Zu,API_TYPE_KMS:zu};class ts{constructor(){l(this,"logger",F.getLogger("utils/platform/siyuan/siYuanApiAdaptor.ts"));l(this,"siyuanApi");this.siyuanApi=new Xt}async getUsersBlogs(){var u;const e=[],t=new G;return t.blogid=E.API_TYPE_SIYUAN,t.blogName=E.API_TYPE_SIYUAN,t.url=(u={VITE_LOG_INFO_ENABLED:"false",VITE_SIYUAN_API_URL:"http://127.0.0.1:6806",VITE_SIYUAN_CONFIG_TOKEN:"",VITE_MIDDLEWARE_URL:"https://publish.terwer.space/api/middleware"}.SIYUAN_API_URL)!=null?u:"",e.push(t),e}async getRecentPostsCount(e){return await this.siyuanApi.getRootBlocksCount(e!=null?e:"")}async getRecentPosts(e,t,u){const s=[];let i=0;t&&(i=t);const a=u!=null?u:"",r=await this.siyuanApi.getRootBlocks(i,e,a);for(let n=0;n<r.length;n++){const c=r[n],g=await this.siyuanApi.getBlockAttrs(c.root_id),p=await this.getPost(c.root_id),h=g["custom-slug"]||"",b=new L;b.postid=c.root_id,b.title=c.content,b.permalink=h===""?S("/post/",c.root_id):S("/post/",h,".html"),b.mt_keywords=p.mt_keywords,b.description=p.description,s.push(b)}return s}async getPost(e,t){let u=e;if(t){const b=await this.siyuanApi.getBlockBySlug(e);b&&(u=b.root_id)}const s=await this.siyuanApi.getBlockByID(u);if(!s)throw new Error("\u6587\u7AE0\u4E0D\u5B58\u5B58\u5728\uFF0Cpostid=>"+u);const i=await this.siyuanApi.getBlockAttrs(u),a=await this.siyuanApi.exportMdContent(u);let r=!0;(i["custom-publish-status"]||"draft")==="secret"&&(r=!1);const c=i["custom-post-password"]||"",g=i["custom-desc"]||"";let p=Mt(a.content);p=st(p);const h=new L;return h.postid=s.root_id||"",h.title=s.content||"",h.description=p||"",h.shortDesc=g||"",h.mt_keywords=i.tags||"",h.post_status=r?k.POST_STATUS_PUBLISH:k.POST_TYPE_DRAFT,h.wp_password=c,h}async editPost(e,t,u){return!1}async newPost(e,t){return""}async deletePost(e){return!1}async getCategories(){return[]}async getPreviewUrl(e){return""}async getSubPostCount(e){return await this.siyuanApi.getSubdocCount(e)}async getSubPosts(e,t,u,s){const i=[];let a=0;u!==0&&(a=u);const r=s!=null?s:"",n=await this.siyuanApi.getSubdocs(e,a,t,r);this.logger.debug("siyuanPosts=>",n);for(let c=0;c<n.length;c++){const g=n[c],p=await this.siyuanApi.getBlockAttrs(g.root_id),h=await this.getPost(g.root_id),b=p["custom-slug"]||"",T=new L;T.postid=g.root_id,T.title=g.content,T.permalink=b===""?S("/post/",g.root_id):S("/post/",b,".html"),T.mt_keywords=h.mt_keywords,T.description=h.description,i.push(T)}return i}}function es(){const o=new Date().toISOString();return ke(o).toLowerCase()}class So{constructor(e,t,u){l(this,"posid");l(this,"modelValue");l(this,"platformType");l(this,"subPlatformType");l(this,"platformKey");l(this,"platformName");this.platformType=e,this.platformKey=t,this.platformName=u}}var et=(o=>(o.Metaweblog="Metaweblog",o.Wordpress="Wordpress",o.Github="Github",o.Custom="Custom",o))(et||{}),us=(o=>(o.Github_Hugo="Hugo",o.Github_Hexo="Hexo",o.Github_Jekyll="Jekyll",o.Github_Vuepress="Vuepress",o.Github_Vitepress="Vitepress",o.Github_Nuxt="Nuxt",o.Github_Next="Next",o.NONE="none",o))(us||{});function To(o){const e=[];switch(o){case"Github":e.push("Hugo"),e.push("Hexo"),e.push("Jekyll"),e.push("Vuepress"),e.push("Vitepress"),e.push("Nuxt"),e.push("Next");break}return e}function Io(){return V(ht.DYNAMIC_CONFIG_KEY)}function vo(o){const e=o,t=[],u=[],s=[];e.forEach(a=>{switch(a.platformType){case"Github":t.push(a);break;case"Metaweblog":u.push(a);break;case"Wordpress":s.push(a);break}});const i={totalCfg:e,githubCfg:t,metaweblogCfg:u,wordpressCfg:s};dt(ht.DYNAMIC_CONFIG_KEY,i)}function ko(o,e){let t;const u=es();return t=o.toLowerCase(),!D(e)&&e!=="none"&&(t=S(t,Ve(e))),S(t,"-",u)}function Oo(o,e){let t=!1;for(let u=0;u<o.length;u++)if(o[u].platformKey===e){t=!0;break}return t}function Uo(o,e,t){if(o==="Github"&&e==="none")return"";let u=o;return t&&(u=e),u=u+"-1",u}function ss(o){return"switch-"+o}function Lo(o){return o+"_true"}function Ro(o){return o+"_false"}function No(o){return o.switchKey+"_"+o.switchValue.toString()}function xo(o){const e=o.split("_"),t=ss(e[0]),u=e[1]==="true";return{switchKey:t,switchValue:u}}function Yo(o){return"custom-"+o+"-post-id"}class Qt{constructor(e){l(this,"logger");l(this,"githubCfg");l(this,"octokit");this.logger=F.getLogger("utils/platform/github/githubApi.ts"),this.githubCfg=e,this.octokit=new me({auth:e.githubToken})}async getPageSha(e){let t;const u=await this.getPageData(e);return u&&(t=u.sha),t}async getPageData(e){let t;const u="GET /repos/"+this.githubCfg.githubUser+"/"+this.githubCfg.githubRepo+"/contents/"+e;this.logger.debug("getPage route=>",u);const s=await this.octokit.request(u,{owner:this.githubCfg.githubUser,repo:this.githubCfg.githubRepo,path:e});return this.logger.debug("getPage res=>",s),s&&(t=s.data),t}async createOrUpdatePage(e,t,u){let s;const i=pt.toBase64(t),a="PUT /repos/"+this.githubCfg.githubUser+"/"+this.githubCfg.githubRepo+"/contents/"+e,r={owner:this.githubCfg.githubUser,repo:this.githubCfg.githubRepo,path:e,message:this.githubCfg.defaultMsg,committer:{name:this.githubCfg.author,email:this.githubCfg.email},content:i};u&&Object.assign(r,{sha:u});const n=await this.octokit.request(a,r);return this.logger.debug("createOrUpdatePage res=>",n),n&&(s=n.data),s}async deletePage(e,t){let u;const s="DELETE /repos/"+this.githubCfg.githubUser+"/"+this.githubCfg.githubRepo+"/contents/"+e,i={owner:this.githubCfg.githubUser,repo:this.githubCfg.githubRepo,path:e,message:this.githubCfg.defaultMsg,committer:{name:this.githubCfg.author,email:this.githubCfg.email},sha:t},a=await this.octokit.request(s,i);return this.logger.debug("deletePage res=>",a),a&&(u=a.data),u}async publishGithubPage(e,t){const s=await this.createOrUpdatePage(e,t,void 0);return this.logger.debug("Github publishPage,res=>",s),s}async updateGithubPage(e,t){const u=await this.getPageSha(e),s=await this.createOrUpdatePage(e,t,u);return this.logger.debug("Github updatePage,res=>",s),s}async deleteGithubPage(e){const t=await this.getPageSha(e),u=await this.deletePage(e,t);return this.logger.debug("Github deletePage,res=>",u),u}async getGithubPageTreeNode(e){const t=await this.getPageData(e),u=[];if(t&&t.length>0){for(let s=0;s<t.length;s++){const i=t[s],a={value:i.path,label:i.name,isLeaf:i.name.indexOf(".md")>-1};u.push(a)}this.logger.debug("getPageTreeNode,data=>",t)}return u}}class z{constructor(e){l(this,"logger");l(this,"apiType");l(this,"cfg");l(this,"githubApi");this.logger=F.getLogger("utils/platform/github/githubApiAdaptor.ts"),this.apiType=e;const t=V(e);this.cfg=t,this.githubApi=new Qt(t)}async getUsersBlogs(){const e=[],t=new G;return t.blogid=this.apiType,t.blogName=U(this.cfg.githubUser,"/"+this.cfg.githubRepo),t.url=U("https://github.com/"+this.cfg.githubUser,"/"+this.cfg.githubRepo),e.push(t),e}async getPost(e,t){const u=new L,s=await this.githubApi.getPageData(e);return u.postid=s.path,u.title=s.path,u.description=pt.fromBase64(s.content),u.link=s.path,u.permalink=s.html_url,this.logger.debug("page=>",s),u}async newPost(e,t){var s;const u=await this.githubApi.publishGithubPage(e.postid,e.description);if(!((s=u==null?void 0:u.content)!=null&&s.path))throw new Error("Hugo\u8C03\u7528API\u5F02\u5E38");return u.content.path}async editPost(e,t,u){var i;const s=await this.githubApi.updateGithubPage(t.postid,t.description);if(!((i=s==null?void 0:s.content)!=null&&i.path))throw new Error("Hugo\u8C03\u7528API\u5F02\u5E38");return!0}async deletePost(e){var u;const t=await this.githubApi.deleteGithubPage(e);if(!((u=t==null?void 0:t.commit)!=null&&u.sha))throw new Error("Hugo\u8C03\u7528API\u5F02\u5E38");return!0}async getCategories(){return await Promise.resolve([])}async getPreviewUrl(e){var s;let t;const u=e.substring(e.lastIndexOf("/")+1).replace(".md","");return t=this.cfg.previewUrl.replace("[postid]",u),t=U((s=this.cfg.home)!=null?s:"",t),t}async getRecentPosts(e,t,u){return[]}async getRecentPostsCount(e){return 0}}const os={serializeMethodCall:Ue},rt=F.getLogger("utils/platform/metaweblog/customXmlrpc.ts"),is=os,{XMLParser:as}=Oe,rs={ignoreAttributes:!1},ns=new as(rs);async function ls(o,e,t){try{const u=is.serializeMethodCall(e,t,"utf8"),i=await $t({type:"fetchChromeXmlrpc",apiUrl:o,fetchCORSParams:{method:"POST",headers:{"content-type":"text/xml"},body:u}});rt.debug("fetchChromeXmlrpc resXml=>",i);let a;if(i){const r=ns.parse(i);rt.debug("parseResult=>",r),a=r.methodResponse||{},rt.debug("resJson=>",JSON.stringify(a))}else a={};return a}catch(u){throw new Error(u)}}const cs={createSecureClient:_t.createSecureClient,createClient:_t.createClient},H=F.getLogger("utils/platform/metaweblog/nodeXmlrpc.ts"),Tt=cs;async function gs(o,e,t){let u;o.includes("https:")?u=Tt.createSecureClient(o):u=Tt.createClient(o);try{H.debug("methodCallDirectNode\u5F00\u59CB"),H.debug("xmlrpcNodeParams.reqMethod=>",e),H.debug("xmlrpcNodeParams.reqParams=>",t);const i=await ps(u,e,t);return JSON.stringify(i)}catch(i){throw H.error(i),new Error("\u8BF7\u6C42\u5904\u7406\u5F02\u5E38")}}async function ps(o,e,t){return await new Promise(function(u,s){o.methodCall(e,t,function(i,a){i?s(i):(H.debug("resolve=>",a),u(a))})})}class Zt{constructor(e,t,u,s){l(this,"logger");l(this,"apiType");l(this,"apiUrl");l(this,"username");l(this,"password");this.logger=F.getLogger("utils/platform/metaweblog/xmlrpc.ts"),this.apiType=e,this.apiUrl=t,this.username=u,this.password=s}async fetchCORS(e,t,u){const i=Lt("VITE_MIDDLEWARE_URL","/api/middleware")+"/xmlrpc";this.logger.debug("apiUrl=>",e);const a={reqMethod:t,reqParams:u};this.logger.debug("fetchCORSParams=>",a);const r={fetchParams:{apiUrl:e,fetchCORSParams:a}},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return this.logger.debug("middleApiUrl=>",i),this.logger.debug("middleFetchOption=>",n),await(await fetch(i,n)).text()}async fetchChromeCORS(e,t,u){this.logger.debug("fetchChrome apiUrl=>",e);const s={reqMethod:t,reqParams:u};this.logger.debug("fetchChrome fetchCORSParams=>",s);const i=await ls(e,t,u);if(!i||i==="")throw new Error("\u8BF7\u6C42\u9519\u8BEF\u6216\u8005\u8FD4\u56DE\u7ED3\u679C\u4E3A\u7A7A");return this.logger.debug("fetchCustom result=>",i),i}async fetchXmlrpc(e,t,u){let s;if(Y().isInSiyuan?(this.logger.info("\u5F53\u524D\u5904\u4E8E\u6302\u4EF6\u6A21\u5F0F\uFF0C\u4F7F\u7528electron\u7684fetch\u83B7\u53D6\u6570\u636E"),s=await gs(e,t,u)):B()?(this.logger.info("\u5F53\u524D\u5904\u4E8EChrome\u63D2\u4EF6\u4E2D\uFF0C\u9700\u8981\u6A21\u62DFfetch\u89E3\u51B3CORS\u8DE8\u57DF\u95EE\u9898"),s=await this.fetchChromeCORS(e,t,u)):(this.logger.info("\u5F53\u524D\u5904\u4E8E\u975E\u6302\u4EF6\u6A21\u5F0F\uFF0C\u5DF2\u5F00\u542F\u8BF7\u6C42\u4EE3\u7406\u89E3\u51B3CORS\u8DE8\u57DF\u95EE\u9898"),s=await this.fetchCORS(e,t,u)),s==="")throw new Error("\u8BF7\u6C42\u9519\u8BEF\u6216\u8005\u8FD4\u56DE\u7ED3\u679C\u4E3A\u7A7A");return this.logger.debug("\u6700\u7EC8\u8FD4\u56DE\u7ED9\u524D\u7AEF\u7684\u6570\u636E=>",s),s}async methodCallEntry(e,t){const u=await this.fetchXmlrpc(this.apiUrl,e,t);return this.logger.debug("\u8BF7\u6C42\u7ED3\u679C\uFF0Cresult=>",u),u}}const ds="blogger.getUsersBlogs",hs="metaWeblog.newPost",ms="metaWeblog.editPost",Es="blogger.deletePost",Fs="metaWeblog.getRecentPosts",bs="metaWeblog.getPost",fs="metaWeblog.getCategories",_={GET_USERS_BLOGS:ds,NEW_POST:hs,EDIT_POST:ms,DELETE_POST:Es,GET_RECENT_POSTS:Fs,GET_POST:bs,GET_CATEGORIES:fs};class Et{constructor(){l(this,"categoryId");l(this,"parentId");l(this,"description");l(this,"categoryDescription");l(this,"categoryName");l(this,"htmlUrl");l(this,"rssUrl");this.categoryId="",this.parentId="0",this.description="",this.categoryDescription="",this.categoryName="",this.htmlUrl="",this.rssUrl=""}}class ws{constructor(e){l(this,"logger");l(this,"apiType");l(this,"cfg");l(this,"xmlrpcClient");this.logger=F.getLogger("utils/platform/metaweblog/metaWeblogApi.ts"),this.apiType=e,this.cfg=V(e),this.xmlrpcClient=new Zt(this.apiType,this.cfg.apiUrl,this.cfg.username,this.cfg.password)}async getUsersBlogs(e,t,u){const s=[],i=await this.xmlrpcClient.methodCallEntry(_.GET_USERS_BLOGS,[this.apiType,t,u]);this.logger.debug("ret=>",i);const a=JSON.parse(i)||[];if(a.faultCode)throw new Error(a.faultString);const r=JSON.parse(i)||[];for(let n=0;n<r.length;n++){const c=new G,g=r[n];c.blogid=g.blogid||"",c.url=g.url,c.blogName=g.blogName,s.push(c)}return s}async getRecentPosts(e,t,u,s){return[]}async getPost(e,t,u){const s=new L;try{const i=await this.xmlrpcClient.methodCallEntry(_.GET_POST,[e,t,u]);this.logger.debug("getCategories ret=>",i);const a=JSON.parse(i)||[];a.faultCode&&this.logger.error("\u8BF7\u6C42\u5206\u7C7B\u5F02\u5E38\uFF0C\u9519\u8BEF\u4FE1\u606F\u5982\u4E0B\uFF1A",a.faultString),this.logger.debug("\u83B7\u53D6\u7684\u6587\u7AE0\u4FE1\u606F\uFF0CdataObj=>",a),s.categories=a.categories}catch(i){this.logger.error("\u6587\u7AE0\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",i)}return s}async newPost(e,t,u,s,i){i||(s.post_status=k.POST_TYPE_DRAFT);const a=this.createPostStruct(s);this.logger.debug("postStruct=>",a);let r=await this.xmlrpcClient.methodCallEntry(_.NEW_POST,[this.apiType,t,u,a,i]);return r=r.replace(/"/g,""),this.logger.debug("ret=>",r),r}async editPost(e,t,u,s,i){i||(s.post_status=k.POST_TYPE_DRAFT);const a=this.createPostStruct(s);this.logger.debug("postStruct=>",a);const r=await this.xmlrpcClient.methodCallEntry(_.EDIT_POST,[e,t,u,a,i]);return this.logger.debug("ret=>",r),r}async deletePost(e,t,u,s,i){const a=await this.xmlrpcClient.methodCallEntry(_.DELETE_POST,[e,t,u,s,i]);return this.logger.debug("ret=>",a),a}createPostStruct(e){var u;const t={};return D(e.title)||Object.assign(t,{title:e.title}),D(e.mt_keywords)||Object.assign(t,{mt_keywords:e.mt_keywords}),D(e.description)||Object.assign(t,{description:e.description}),D(e.wp_slug)||Object.assign(t,{wp_slug:e.wp_slug}),R()||Object.assign(t,{dateCreated:e.dateCreated||new Date}),Object.assign(t,{categories:e.categories||[]}),Object.assign(t,{post_status:(u=e.post_status)!=null?u:k.POST_STATUS_PUBLISH}),D(e.wp_password)||Object.assign(t,{wp_password:e.wp_password}),t}async getCategories(e,t,u){const s=[];try{const i=await this.xmlrpcClient.methodCallEntry(_.GET_CATEGORIES,[this.apiType,t,u]);this.logger.debug("getCategories ret=>",i);const a=JSON.parse(i)||[];a.faultCode&&this.logger.error("\u8BF7\u6C42\u5206\u7C7B\u5F02\u5E38\uFF0C\u9519\u8BEF\u4FE1\u606F\u5982\u4E0B\uFF1A",a.faultString);const r=JSON.parse(i)||[];this.logger.debug("\u83B7\u53D6\u7684\u5206\u7C7B\u4FE1\u606F\uFF0CdataArr=>",r),r.forEach(n=>{const c=new Et;c.description=n.description,c.categoryId=n.categoryId,s.push(c)})}catch(i){this.logger.error("\u5206\u7C7B\u83B7\u53D6\u5931\u8D25",i)}return s}}class Cs{constructor(e,t,u,s){l(this,"logger");l(this,"apiType");l(this,"apiUrl");l(this,"username");l(this,"password");l(this,"xmlrpcClient");this.logger=F.getLogger("utils/platform/metaweblog/CustomMetaweblogApi.ts"),this.apiType=e,this.apiUrl=t,this.username=u,this.password=s,this.xmlrpcClient=new Zt(this.apiType,this.apiUrl,this.username,this.password)}doFault(e){const t=e.fault;if(t){const u=t.value.struct.member,s=this.parseFieldValue(u,"faultCode"),i=this.parseFieldValue(u,"faultString");throw new Error(S("\u53D1\u751F\u5F02\u5E38\uFF0C\u9519\u8BEF\u7801=>",s,"\uFF0C\u9519\u8BEF\u4FE1\u606F=>",i))}if(!(e!=null&&e.params))throw new Error("\u53D1\u751F\u5F02\u5E38=>\u6570\u636E\u4E3A\u7A7A")}async getUsersBlogs(e,t,u){const s=[],i=await this.xmlrpcClient.methodCallEntry(_.GET_USERS_BLOGS,[this.apiType,t,u]);this.logger.debug("getUsersBlogs ret=>",i),this.doFault(i);const a=i.params.param.value.array.data.value.struct.member||[],r=new G;return r.blogid=this.parseFieldValue(a,"blogid"),r.url=this.parseFieldValue(a,"url"),r.blogName=this.parseFieldValue(a,"blogName"),s.push(r),s}parseFieldValue(e,t){let u;for(let s=0;s<e.length;s++){const i=e[s];if(i.name===t)if(typeof i.value=="string"){u=i.value;break}else{u=i.value.string||i.value.int||i.value.i4||i.value;break}}return u}async getRecentPosts(e,t,u,s,i,a){const r=[],n=[this.apiType,t,u,s];if(i!=null?i:a){const p=i!=null?i:1,h=a!=null?a:"";n.push(p),n.push(h)}const c=await this.xmlrpcClient.methodCallEntry(_.GET_RECENT_POSTS,n);this.logger.debug("getRecentPosts ret=>",c),this.doFault(c);const g=c.params.param.value.array.data.value||[];if(c.params.param.value.array.data.value instanceof Array)g.forEach(p=>{const h=this.parsePost(p);r.push(h)});else{const p=c.params.param.value.array.data.value;if(p){const h=this.parsePost(p);r.push(h)}}return this.logger.debug("result=>",r),r}parsePost(e){var r,n,c;const t=new L,u=e.struct.member;t.mt_keywords=this.parseFieldValue(u,"mt_keywords"),t.title=this.parseFieldValue(u,"title"),t.link=this.parseFieldValue(u,"link"),t.permalink=this.parseFieldValue(u,"permalink"),t.postid=this.parseFieldValue(u,"postid"),t.description=this.parseFieldValue(u,"description"),t.mt_excerpt=this.parseFieldValue(u,"mt_excerpt"),t.wp_slug=this.parseFieldValue(u,"wp_slug"),t.dateCreated=this.parseFieldValue(u,"dateCreated");const s=[],i=((c=(n=(r=this.parseFieldValue(u,"categories"))==null?void 0:r.array)==null?void 0:n.data)==null?void 0:c.value)||[],a=(i==null?void 0:i.string)||i;return typeof a=="string"?s.push(a):i&&i.length>0&&i.forEach(g=>{const p=g.string;s.push(p)}),t.categories=s,t.mt_text_more=this.parseFieldValue(u,"mt_text_more"),t}async getPost(e,t,u){const s=await this.xmlrpcClient.methodCallEntry(_.GET_POST,[e,t,u]);this.logger.debug("getPost ret=>",s),this.doFault(s);const i=s.params.param.value||[],a=this.parsePost(i);return this.logger.debug("getPost post=>",a),a}async newPost(e,t,u,s,i){i||(s.post_status=k.POST_TYPE_DRAFT);const a=this.createPostStruct(s);this.logger.debug("postStruct=>",a);const r=await this.xmlrpcClient.methodCallEntry(_.NEW_POST,[this.apiType,t,u,a,i]);this.logger.debug("newPost ret=>",r),this.doFault(r);const n=r.params.param.value.string||r.params.param.value||"";return this.logger.debug("newPost retStr=>",n.toString()),n.toString()}async editPost(e,t,u,s,i){i||(s.post_status=k.POST_TYPE_DRAFT);const a=this.createPostStruct(s);this.logger.debug("postStruct=>",a);const r=await this.xmlrpcClient.methodCallEntry(_.EDIT_POST,[e,t,u,a,i]);this.doFault(r);const n=r.params.param.value.boolean||r.params.param.value||0;return this.logger.debug("editPost retBool=>",n),n}async deletePost(e,t,u,s,i){const a=await this.xmlrpcClient.methodCallEntry(_.DELETE_POST,[e,t,u,s,i]);this.doFault(a);const r=a.params.param.value.boolean||a.params.param.value||0;return this.logger.debug("deletePost retBool=>",r),r}createPostStruct(e){var u;const t={};return D(e.title)||Object.assign(t,{title:e.title}),D(e.mt_keywords)||Object.assign(t,{mt_keywords:e.mt_keywords}),D(e.description)||Object.assign(t,{description:e.description}),D(e.wp_slug)||Object.assign(t,{wp_slug:e.wp_slug}),R()||Object.assign(t,{dateCreated:e.dateCreated||new Date}),Object.assign(t,{categories:e.categories||[]}),Object.assign(t,{post_status:(u=e.post_status)!=null?u:k.POST_STATUS_PUBLISH}),D(e.wp_password)||Object.assign(t,{wp_password:e.wp_password}),t}async getCategories(e,t,u){const s=[],i=await this.xmlrpcClient.methodCallEntry(_.GET_CATEGORIES,[this.apiType,t,u]);return this.logger.debug("getCategories ret=>",i),this.doFault(i),(i.params.param.value.array.data.value||[]).forEach(r=>{const n=this.parseCat(r);s.push(n)}),this.logger.debug("getCategories result=>",s),s}parseCat(e){const t=new Et,u=e.struct.member;return t.categoryId=this.parseFieldValue(u,"categoryId"),t.parentId=this.parseFieldValue(u,"parentId"),t.description=this.parseFieldValue(u,"description"),t.categoryDescription=this.parseFieldValue(u,"categoryDescription"),t.categoryName=this.parseFieldValue(u,"categoryName"),t.htmlUrl=this.parseFieldValue(u,"htmlUrl"),t.rssUrl=this.parseFieldValue(u,"rssUrl"),t}}class W{constructor(e){l(this,"logger");l(this,"cfg");l(this,"metaWeblogApi");l(this,"username");l(this,"password");l(this,"appkey");l(this,"customMetaWeblogApi");this.logger=F.getLogger("utils/platform/metaweblog/metaWeblogApiAdaptor.ts"),this.cfg=V(e),this.metaWeblogApi=new ws(e),this.username=this.cfg.username,this.password=this.cfg.password,this.appkey=e,this.customMetaWeblogApi=new Cs(e,this.cfg.apiUrl,this.cfg.username,this.cfg.password)}async getUsersBlogs(){let e=[];return B()?e=await this.customMetaWeblogApi.getUsersBlogs(this.appkey,this.username,this.password):e=await this.metaWeblogApi.getUsersBlogs(this.appkey,this.username,this.password),this.logger.debug("getUsersBlogs=>",e),e}async getRecentPostsCount(e){return await Promise.resolve(0)}async getRecentPosts(e){const t=[];let u;B()?u=await this.customMetaWeblogApi.getRecentPosts(this.appkey,this.username,this.password,e):u=await this.metaWeblogApi.getRecentPosts(this.appkey,this.username,this.password,e);for(let s=0;s<u.length;s++){const i=u[s],a=new L;a.postid=i.postid,a.title=i.title,a.mt_keywords=i.mt_keywords,a.permalink=i.permalink,a.description=i.description,a.wp_slug=i.wp_slug,a.dateCreated=i.dateCreated,a.categories=i.categories,t.push(a)}return t}async getPost(e){let t;return B()?t=await this.customMetaWeblogApi.getPost(e,this.username,this.password):t=await this.metaWeblogApi.getPost(e,this.username,this.password),t}async editPost(e,t,u){let s;return B()?s=await this.customMetaWeblogApi.editPost(e,this.username,this.password,t,u!=null?u:!0):s=await this.metaWeblogApi.editPost(e,this.username,this.password,t,u!=null?u:!0),s}async newPost(e,t){let u;return B()?u=await this.customMetaWeblogApi.newPost(this.appkey,this.username,this.password,e,t!=null?t:!0):u=await this.metaWeblogApi.newPost(this.appkey,this.username,this.password,e,t!=null?t:!0),u}async deletePost(e){let t;return B()?t=await this.customMetaWeblogApi.deletePost(this.appkey,e,this.username,this.password,!0):t=await this.metaWeblogApi.deletePost(this.appkey,e,this.username,this.password,!0),t}async getCategories(){let e;return B()?e=await this.customMetaWeblogApi.getCategories(this.appkey,this.username,this.password):e=await this.metaWeblogApi.getCategories(this.appkey,this.username,this.password),this.logger.debug("\u83B7\u53D6\u5206\u7C7B\u5217\u8868=>",e),e}async getPreviewUrl(e){var s;const t=this.cfg.previewUrl.replace("[postid]",e),u=U((s=this.cfg.home)!=null?s:"",t);return this.logger.debug("previewUrl",u),u}}class ys extends Qt{constructor(t){super(t);l(this,"vuepressCfg");this.logger=F.getLogger("utils/platform/github/vuepress/vuepressApiV1.ts"),this.vuepressCfg=t}async getGithubPageTreeNode(t){const u=await this.getPageData(t),s=[];if(u&&u.length>0){for(let i=0;i<u.length;i++){const a=u[i];if(a.name.indexOf(".vuepress")>-1||a.name.indexOf("@pages")>-1||a.name.indexOf("_posts")>-1)continue;const r={value:a.path,label:a.name,isLeaf:a.name.indexOf(".md")>-1};s.push(r)}this.logger.debug("getPageTreeNode,data=>",u)}return s}}const As="custom-vuepress-slug",Ds="custom-hugo-slug",Bs="custom-hexo-slug",_s="custom-jekyll-slug",Ps="custom-jvue-post-id",Ss="custom-conf-post-id",Ts="custom-cnblogs-post-id",Is="custom-wordpress-post-id",vs="custom-liandi-post-id",ks="custom-yuque-post-id",Os="custom-kms-post-id",Us="custom-wechat-post-id",Ls={VUEPRESS_POSTID_KEY:As,HUGO_POSTID_KEY:Ds,HEXO_POSTID_KEY:Bs,JEKYLL_POSTID_KEY:_s,JVUE_POSTID_KEY:Ps,CONFLUENCE_POSTID_KEY:Ss,CNBLOGS_POSTID_KEY:Ts,WORDPRESS_POSTID_KEY:Is,LIANDI_POSTID_KEY:vs,YUQUE_POSTID_KEY:ks,KMS_POSTID_KEY:Os,WECHAT_POSTID_KEY:Us};class Rs{constructor(e,t,u,s){l(this,"githubUser");l(this,"githubRepo");l(this,"githubToken");l(this,"defaultBranch");l(this,"defaultMsg");l(this,"defaultPath");l(this,"author");l(this,"email");l(this,"posidKey","");l(this,"home");l(this,"previewUrl");l(this,"baseUrl");l(this,"apiStatus");this.home=e,this.githubUser=t,this.githubRepo=u,this.githubToken=s,this.defaultBranch="main",this.defaultPath="docs/_posts",this.defaultMsg="auto published by sy-post-publisher",this.author="terwer",this.email="youweics@163.com",this.previewUrl="",this.baseUrl="https://github.com",this.apiStatus=!1}}class Ns extends Rs{constructor(){super("","","",""),this.defaultPath="docs",this.posidKey=Ls.VUEPRESS_POSTID_KEY,this.previewUrl="/post/[postid].html"}}class xs extends z{constructor(){super(E.API_TYPE_VUEPRESS);l(this,"vuepressApi");const t=new Ns;this.vuepressApi=new ys(t)}}class Ys extends z{constructor(){super(E.API_TYPE_HUGO)}}class Vs extends z{constructor(){super(E.API_TYPE_HEXO)}}class Gs extends z{constructor(){super(E.API_TYPE_JEKYLL)}}class Ms extends W{constructor(){super(E.API_TYPE_JVUE)}}class qs extends W{constructor(){super(E.API_TYPE_CONFLUENCE)}}class js extends W{constructor(){super(E.API_TYPE_CNBLOGS)}}class Ws extends W{constructor(){super(E.API_TYPE_WORDPRESS)}}class Ft{constructor(e){l(this,"apiType");l(this,"cfg");this.apiType=e,this.cfg=V(e)}async deletePost(e){throw new Error("\u8BE5\u529F\u80FD\u672A\u5B9E\u73B0\uFF0C\u8BF7\u5728\u5B50\u7C7B\u91CD\u5199\u8BE5\u65B9\u6CD5")}async editPost(e,t,u){throw new Error("\u8BE5\u529F\u80FD\u672A\u5B9E\u73B0\uFF0C\u8BF7\u5728\u5B50\u7C7B\u91CD\u5199\u8BE5\u65B9\u6CD5")}async getPost(e,t){throw new Error("\u8BE5\u529F\u80FD\u672A\u5B9E\u73B0\uFF0C\u8BF7\u5728\u5B50\u7C7B\u91CD\u5199\u8BE5\u65B9\u6CD5")}async getRecentPosts(e,t,u){throw new Error("\u8BE5\u529F\u80FD\u672A\u5B9E\u73B0\uFF0C\u8BF7\u5728\u5B50\u7C7B\u91CD\u5199\u8BE5\u65B9\u6CD5")}async getUsersBlogs(){throw new Error("\u8BE5\u529F\u80FD\u672A\u5B9E\u73B0\uFF0C\u8BF7\u5728\u5B50\u7C7B\u91CD\u5199\u8BE5\u65B9\u6CD5")}async newPost(e,t){throw new Error("\u8BE5\u529F\u80FD\u672A\u5B9E\u73B0\uFF0C\u8BF7\u5728\u5B50\u7C7B\u91CD\u5199\u8BE5\u65B9\u6CD5")}async getCategories(){return[]}async getRecentPostsCount(e){return 0}async getPreviewUrl(e){return""}}class bt{constructor(){l(this,"logger");this.logger=F.getLogger("utils/platform/commonblog/commonblogApi.ts")}async fetchCORS(e,t,u){const i=Lt("VITE_MIDDLEWARE_URL","/api/middleware")+"/fetch";this.logger.debug("apiUrl=>",e),this.logger.debug("fetchOptions=>",t);const a={apiUrl:e,fetchOptions:t};u!=null&&Object.assign(a,{formJson:u});const r={fetchParams:a},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return this.logger.debug("middleApiUrl=>",i),this.logger.debug("middleFetchOption=>",n),await fetch(i,n)}async fetchChromeCORS(e,t,u){try{const s={type:"fetchChromeJson",apiUrl:e,fetchCORSOptions:t};u!=null&&Object.assign(s,{formJson:JSON.stringify(u)}),this.logger.debug("fetchChrome reqOps=>",s);const i=await $t(s);return this.logger.debug("fetchChromeJson resJson=>",i),i}catch(s){throw new Error("\u8BF7\u6C42\u5F02\u5E38",s)}}async fetchCall(e,t,u){let s;if(Y().isInSiyuan?(this.logger.warn("\u5F53\u524D\u5904\u4E8E\u6302\u4EF6\u6A21\u5F0F\uFF0C\u4F7F\u7528electron\u7684fetch\u83B7\u53D6\u6570\u636E"),s=await fetch(e,t)):B()?(this.logger.warn("\u5F53\u524D\u5904\u4E8EChrome\u63D2\u4EF6\u4E2D\uFF0C\u9700\u8981\u6A21\u62DFfetch\u89E3\u51B3CORS\u8DE8\u57DF\u95EE\u9898"),s=await this.fetchChromeCORS(e,t,u)):(this.logger.warn("\u5F53\u524D\u5904\u4E8E\u975E\u6302\u4EF6\u6A21\u5F0F\uFF0C\u5DF2\u5F00\u542F\u8BF7\u6C42\u4EE3\u7406\u89E3\u51B3CORS\u8DE8\u57DF\u95EE\u9898"),this.logger.warn("formJson=>",u),s=await this.fetchCORS(e,t,u)),!s)throw new Error("\u8BF7\u6C42\u9519\u8BEF\u6216\u8005\u8FD4\u56DE\u7ED3\u679C\u4E3A\u7A7A");return this.logger.debug("\u6700\u7EC8\u8FD4\u56DE\u7ED9\u524D\u7AEF\u7684\u6570\u636E=>",s),s}async fetchEntry(e,t,u){const s=await this.fetchCall(e,t,u);return this.logger.debug("\u8BF7\u6C42\u7ED3\u679C\uFF0Cresult=>",s),s}parseCORSBody(e){return e.body}async doFetch(e,t,u){const s=await this.fetchEntry(e,t,u);if(!s)throw new Error("\u8BF7\u6C42\u5F02\u5E38");let i;if({VITE_LOG_INFO_ENABLED:"false",VITE_SIYUAN_API_URL:"http://127.0.0.1:6806",VITE_SIYUAN_CONFIG_TOKEN:"",VITE_MIDDLEWARE_URL:"https://publish.terwer.space/api/middleware"}.TEST==="true"||typeof s<"u"&&s instanceof Response){const r=s.status;if(r!==200){if(r===401)throw new Error("\u56E0\u6743\u9650\u4E0D\u8DB3\u64CD\u4F5C\u5DF2\u88AB\u7981\u6B62");if(r>401){if(r===413)throw new Error("\u8BF7\u6C42\u5185\u5BB9\u8FC7\u591A\uFF0C\u8BF7\u5220\u51CF\u6587\u7AE0\u6B63\u6587\u4E4B\u540E\u518D\u8BD5");const c=s.statusText;throw new Error(c)}else throw new Error("fetch\u8BF7\u6C42\u9519\u8BEF")}if(Y().isInSiyuan)i=await s.json();else{const c=await s.json();i=this.parseCORSBody(c)}}else i=s;return i}async doFormFetch(e,t,u){if(Y().isInSiyuan){const i=new URLSearchParams;return u.forEach(a=>{i.append(a.key,a.value)}),t.body=i,await this.doFetch(e,t)}return B()?await this.doFetch(e,t,u):await this.doFetch(e,t,u)}}class Hs extends bt{constructor(t,u,s){super();l(this,"baseUrl");l(this,"username");l(this,"token");this.logger=F.getLogger("utils/platform/commonblog/liandi/liandiApi.ts"),this.baseUrl=t,this.username=u,this.token=s}async getUser(){const t="/user",u={};return await this.liandiRequest(t,u,"GET",!0)}async addArticle(t,u,s){const i="/article",a={articleTitle:t,articleTags:s,articleContent:u};await this.liandiRequest(i,a,"POST",!0);const r=await this.getFirstArticleId();return this.logger.debug("liandi addArticle postid=>",r),r}async getFirstArticleId(){const t="/user/"+this.username+"/articles?p=1",u={},i=(await this.liandiRequest(t,u,"GET",!0)).articles;if(i.length===0)throw new Error("\u672A\u83B7\u53D6\u5230\u5E16\u5B50");return i[0].oId}async updateArticle(t,u,s,i){const a="/article/"+t,r={articleTitle:u,articleTags:i,articleContent:s};return await this.liandiRequest(a,r,"PUT",!0),!0}async liandiRequest(t,u,s,i){const a=this.baseUrl+t;let r="POST";s!=null&&(r=s);const n={method:r};jt(u)||Object.assign(n,{body:JSON.stringify(u)}),i&&Object.assign(n,{headers:{Authorization:`token ${this.token}`,"User-Agent":"Terwer/0.1.0"}}),this.logger.debug("\u5411\u94FE\u6EF4\u8BF7\u6C42\u6570\u636E\uFF0CapiUrl=>",a),this.logger.debug("\u5411\u94FE\u6EF4\u8BF7\u6C42\u6570\u636E\uFF0CfetchOps=>",n);const c=await this.doFetch(a,n);if(this.logger.debug("\u5411\u94FE\u6EF4\u8BF7\u6C42\u6570\u636E\uFF0CresJson=>",c),c.code===0)return c.data;if(c.code===-1)throw new Error(c.msg);{const g=c.msg;throw D(g)?new Error("\u53D1\u5E03\u5E16\u5B50\u53D7\u9650\u6216\u8005\u7CFB\u7EDF\u5F02\u5E38"):new Error(g)}}}class Xs extends Ft{constructor(){var t,u;super(E.API_TYPE_LIANDI);l(this,"logger");l(this,"liandiApi");this.logger=F.getLogger("utils/platform/commonblog/liandi/liandiApiAdaptor.ts"),this.liandiApi=new Hs(this.cfg.apiUrl,(t=this.cfg.username)!=null?t:"",(u=this.cfg.token)!=null?u:"")}async getUsersBlogs(){var i,a;const t=[],u=await this.liandiApi.getUser();this.logger.debug("user=>",u);const s=new G;return s.blogid=this.apiType,s.blogName=(a=(i=u.user.userName)!=null?i:this.cfg.blogName)!=null?a:"\u94FE\u6EF4",s.url=this.cfg.apiUrl,t.push(s),t}async getRecentPostsCount(t){return 0}async deletePost(t){throw new Error("\u94FE\u6EF4\u793E\u533AAPI\u4E0D\u652F\u6301\u5220\u9664\u5E16\u5B50")}async editPost(t,u,s){const i=await this.liandiApi.updateArticle(t,u.title,u.description,u.mt_keywords);return this.logger.debug("liandi newPost=>",i),i}async newPost(t,u){const s=await this.liandiApi.addArticle(t.title,t.description,t.mt_keywords);return this.logger.warn("liandi newPost=>",s),s!=null?s:""}async getPreviewUrl(t){var i,a;const s=((i=this.cfg.previewUrl)!=null?i:"").replace("[postid]",t);return U((a=this.cfg.home)!=null?a:"",s)}}class Js extends bt{constructor(t,u,s,i){super();l(this,"baseUrl");l(this,"blogid");l(this,"username");l(this,"token");this.logger=F.getLogger("utils/platform/commonblog/yuque/yuqueApi.ts"),this.baseUrl=t,this.blogid=u,this.username=s,this.token=i}async repos(){const t="/users/"+this.username+"/repos",u={};return await this.yuqueRequest(t,u,"GET")}async addDoc(t,u,s,i){let a="/repos/"+this.blogid+"/docs";i&&(a="/repos/"+i+"/docs",this.logger.warn("yuque addDoc with repo",i));const r={title:t,slug:u,format:"markdown",body:s},n=await this.yuqueRequest(a,r,"POST");if(this.logger.debug("yuqueRequest addDoc=>",n),!n)throw new Error("\u8BF7\u6C42\u8BED\u96C0API\u5F02\u5E38");return S(n.id,"")}async updateDoc(t,u,s,i,a){let r="/repos/"+this.blogid+"/docs/"+t;a&&(r="/repos/"+a+"/docs/"+t,this.logger.warn("yuque updateDoc with repo",a));const n={title:u,slug:s,body:i,_force_asl:1};if(!await this.yuqueRequest(r,n,"PUT"))throw new Error("\u8BF7\u6C42\u8BED\u96C0API\u5F02\u5E38");return!0}async delDoc(t,u){let s="/repos/"+this.blogid+"/docs/"+t;u&&(s="/repos/"+u+"/docs/"+t,this.logger.warn("yuque delDoc with repo",u));const i={};if(!await this.yuqueRequest(s,i,"DELETE"))throw new Error("\u8BF7\u6C42\u8BED\u96C0API\u5F02\u5E38");return!0}async getDoc(t,u){let s="/repos/"+this.blogid+"/docs/"+t;u&&(s="/repos/"+u+"/docs/"+t,this.logger.warn("yuque getDoc with repo",u));const i={},a=await this.yuqueRequest(s,i,"GET");if(!a)throw new Error("\u8BF7\u6C42\u8BED\u96C0API\u5F02\u5E38");return a}async yuqueRequest(t,u,s){const i=this.baseUrl+t;let a="POST";s&&(a=s);const r={method:a};jt(u)||Object.assign(r,{body:JSON.stringify(u)}),Object.assign(r,{headers:{"Content-Type":"application/json","X-Auth-Token":this.token,"User-Agent":"Terwer/0.1.0"}}),this.logger.debug("\u5411\u8BED\u96C0\u8BF7\u6C42\u6570\u636E\uFF0CapiUrl=>",i),this.logger.debug("\u5411\u8BED\u96C0\u8BF7\u6C42\u6570\u636E\uFF0CfetchOps=>",r);const n=await this.doFetch(i,r);return this.logger.debug("\u5411\u8BED\u96C0\u8BF7\u6C42\u6570\u636E\uFF0CresJson=>",n),n.data?n.data:null}}class Ks extends Ft{constructor(){var t,u,s;super(E.API_TYPE_YUQUE);l(this,"logger");l(this,"yuqueApi");this.logger=F.getLogger("utils/platform/commonblog/yuque/yuqueApiAdaptor.ts"),this.yuqueApi=new Js(this.cfg.apiUrl,(t=this.cfg.blogid)!=null?t:"",(u=this.cfg.username)!=null?u:"",(s=this.cfg.token)!=null?s:"")}async getUsersBlogs(){const t=[],u=await this.yuqueApi.repos();return this.logger.debug("repos=>",u),u.forEach(s=>{const i=new G;i.blogid=s.namespace,i.blogName=s.name,i.url=s.namespace,t.push(i)}),t}async deletePost(t){const u=this.getYuquePostKey(t);return await this.yuqueApi.delDoc(u.docId,u.docRepo)}async editPost(t,u,s){const i=this.getYuquePostKey(t);return await this.yuqueApi.updateDoc(i.docId,u.title,u.wp_slug,u.description,i.docRepo)}async newPost(t,u){if(t.cate_slugs!=null&&t.cate_slugs.length>0){const s=t.cate_slugs[0];return await this.yuqueApi.addDoc(t.title,t.wp_slug,t.description,s)}else return await this.yuqueApi.addDoc(t.title,t.wp_slug,t.description)}async getPost(t,u){const s=this.getYuquePostKey(t),i=await this.yuqueApi.getDoc(s.docId,s.docRepo);this.logger.debug("yuqueDoc=>",i);const a=new L;a.title=i.title,a.description=i.body;const r=i.book,n=[],c=[];return n.push(r.name),a.categories=n,c.push(r.namespace),a.cate_slugs=c,a}async getCategories(){const t=[],u=await this.yuqueApi.repos();return this.logger.debug("yuque repos=>",u),u&&u.length>0&&u.forEach(s=>{if(s.type==="Book"){const i=new Et;i.categoryId=s.slug,i.categoryName=s.name,i.description=s.name,i.categoryDescription=s.name,t.push(i)}}),t}async getPreviewUrl(t){var n,c,g,p;const u=(n=this.cfg.previewUrl)!=null?n:"",s=this.getYuquePostKey(t),i=s.docId,a=(g=(c=s.docRepo)!=null?c:this.cfg.blogid)!=null?g:"",r=u.replace("[postid]",i).replace("[notebook]",a);return U((p=this.cfg.home)!=null?p:"",r)}getYuquePostKey(t){let u,s;if(t.indexOf("_")>0){const i=t.split("_");u=i[0],s=i[1]}else u=t;return{docId:u,docRepo:s}}}class $s extends bt{constructor(t,u){super();l(this,"baseUrl");l(this,"basicToken");this.baseUrl=t,this.basicToken=u}async addDoc(t,u){const s="/addDoc",i=[{key:"fdDocTemplateId",value:"181f20dcfc5744e90b0b8254499b4af0"},{key:"docSubject",value:t},{key:"docContent",value:u},{key:"fdDocCreator",value:"180f58069509ef61dd964994e4591dab"},{key:"authorType",value:"1"},{key:"docAuthor",value:"180f58069509ef61dd964994e4591dab"}];return(await this.kmsRequestForm(s,i)).fdId}async updateDoc(t,u,s){const i="/updateDoc",a=[{key:"fdId",value:t},{key:"docSubject",value:u},{key:"docContent",value:s}];return await this.kmsRequestForm(i,a),!0}async delDoc(t){const u="/delDoc",s={fdId:t};return await this.kmsRequestJson(u,s),!0}async kmsRequestForm(t,u){const s=this.baseUrl+t,i={headers:{Authorization:`Basic ${this.basicToken}`},method:"POST"},a=await this.doFormFetch(s,i,u),r=a.code,n=a.msg;if(r!==200)throw r===401?new Error(S("\u56E0\u6743\u9650\u4E0D\u8DB3\u64CD\u4F5C\u5DF2\u88AB\u7981\u6B62\uFF1A",n)):new Error("\u8BF7\u6C42\u9519\u8BEF");return a.data}async kmsRequestJson(t,u){const s=this.baseUrl+t,i={body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:`Basic ${this.basicToken}`},method:"POST"},a=await this.doFetch(s,i),r=a.code,n=a.msg;if(r!==200)throw r===401?new Error(S("\u56E0\u6743\u9650\u4E0D\u8DB3\u64CD\u4F5C\u5DF2\u88AB\u7981\u6B62\uFF1A",n)):new Error("\u8BF7\u6C42\u9519\u8BEF");return a.data}}class zs extends Ft{constructor(){var i,a;super(E.API_TYPE_KMS);l(this,"kmsApi");const t=(i=this.cfg.username)!=null?i:"",u=(a=this.cfg.password)!=null?a:"",s=pt.toBase64(`${t}:${u}`);this.kmsApi=new $s(this.cfg.apiUrl,s)}async getUsersBlogs(){const t=[],u=new G;return u.blogid=this.apiType,u.blogName="KMS",u.url=this.cfg.apiUrl,t.push(u),t}async deletePost(t){return await this.kmsApi.delDoc(t)}async editPost(t,u,s){return await this.kmsApi.updateDoc(t,u.title,u.description)}async newPost(t,u){return await this.kmsApi.addDoc(t.title,t.description)}async getPreviewUrl(t){var i,a;const s=((i=this.cfg.previewUrl)!=null?i:"").replace("[postid]",t);return U((a=this.cfg.home)!=null?a:"",s)}}class Vo{constructor(e){l(this,"type");l(this,"apiAdaptor");if(this.type=e,e.includes("-")){const t=e.split("-");if(t.length>0){const u=t[0];if(u.includes(et.Github.toLowerCase())){this.apiAdaptor=new z(e);return}else if(u===et.Metaweblog.toLowerCase()){this.apiAdaptor=new W(e);return}else if(u===et.Wordpress.toLowerCase()){this.apiAdaptor=new W(e);return}}}switch(this.type){case E.API_TYPE_SIYUAN:this.apiAdaptor=new ts;break;case E.API_TYPE_VUEPRESS:this.apiAdaptor=new xs;break;case E.API_TYPE_HUGO:this.apiAdaptor=new Ys;break;case E.API_TYPE_HEXO:this.apiAdaptor=new Vs;break;case E.API_TYPE_JEKYLL:this.apiAdaptor=new Gs;break;case E.API_TYPE_JVUE:this.apiAdaptor=new Ms;break;case E.API_TYPE_CONFLUENCE:this.apiAdaptor=new qs;break;case E.API_TYPE_CNBLOGS:this.apiAdaptor=new js;break;case E.API_TYPE_WORDPRESS:this.apiAdaptor=new Ws;break;case E.API_TYPE_LIANDI:this.apiAdaptor=new Xs;break;case E.API_TYPE_YUQUE:this.apiAdaptor=new Ks;break;case E.API_TYPE_KMS:this.apiAdaptor=new zs;break;default:throw new Error("\u672A\u627E\u5230\u63A5\u53E3\u9002\u914D\u5668\uFF0C\u8BF7\u68C0\u67E5\u53C2\u6570")}}async getRecentPostsCount(e){return await this.apiAdaptor.getRecentPostsCount(e)}async getRecentPosts(e,t,u){return await this.apiAdaptor.getRecentPosts(e,t,u)}async getUsersBlogs(){return await this.apiAdaptor.getUsersBlogs()}async getPost(e,t){return await this.apiAdaptor.getPost(e,t)}async editPost(e,t,u){return await this.apiAdaptor.editPost(e,t,u)}async newPost(e,t){return await this.apiAdaptor.newPost(e,t)}async deletePost(e){return await this.apiAdaptor.deletePost(e)}async getCategories(){return await this.apiAdaptor.getCategories()}async getPreviewUrl(e){return await this.apiAdaptor.getPreviewUrl(e)}}export{fo as $,Ro as A,xo as B,ht as C,So as D,Ls as E,Yo as F,Xt as G,D as H,Rs as I,V as J,Vo as K,F as L,dt as M,jt as N,E as O,L as P,S as Q,Co as R,ts as S,yo as T,ou as U,Ns as V,wo as W,Ao as X,Do as Y,Qt as Z,Po as _,Bo as a,st as a0,Lt as a1,Vt as a2,Yt as a3,ho as b,Kt as c,mt as d,ct as e,Gt as f,Y as g,N as h,B as i,us as j,et as k,ko as l,su as m,To as n,Uo as o,_o as p,Io as q,bo as r,vo as s,Oo as t,Fo as u,mo as v,ss as w,No as x,Eo as y,Lo as z};
