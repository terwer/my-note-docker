{"ast":null,"code":"import { getPage } from \"@/lib/siyuanUtil\";\n/**\n * 获取本地缓存的思源笔记页面ID\n * @param force true代表强制调用查询不获取缓存\n * @returns {Promise<*|string>}\n */\n\nexport async function getSiyuanPageId(force) {\n  const page = await getSiyuanPage(force);\n  console.log(\"getSiyuanPageId.getSiyuanPage.result=>\", page);\n  const pageId = page.root_id || \"\";\n  console.log(\"获取本地缓存的思源笔记页面ID=>\", pageId);\n  return pageId;\n}\n/**\n * 获取本地缓存的思源笔记页面信息（不是实时的，获取有变化的属性不要使用此方法，实时页面请将force传递为true）\n * @param force true代表强制调用查询不获取缓存\n * @returns {Promise<any>}\n */\n\nexport async function getSiyuanPage(force) {\n  // 默认读取缓存\n  if (!force && localStorage.siyuanPage) {\n    const pageObj = JSON.parse(localStorage.siyuanPage);\n    console.log(\"获取本地缓存的思源笔记页面信息（不是实时的，获取有变化的属性不要使用此方法，实时页面请将force传递为true=>\", pageObj);\n    return pageObj;\n  } // 如果本地不存在，或者需要强制读取，调用api查询\n\n\n  const page = await getPage();\n\n  if (page) {\n    localStorage.siyuanPage = JSON.stringify(page);\n    console.log(\"调用API设置查询思源页面信息并更新本地缓存\", page);\n  }\n\n  return page;\n}","map":{"version":3,"names":["getPage","getSiyuanPageId","force","page","getSiyuanPage","console","log","pageId","root_id","localStorage","siyuanPage","pageObj","JSON","parse","stringify"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/src/lib/util.js"],"sourcesContent":["import {getPage} from \"@/lib/siyuanUtil\";\n\n/**\n * 获取本地缓存的思源笔记页面ID\n * @param force true代表强制调用查询不获取缓存\n * @returns {Promise<*|string>}\n */\nexport async function getSiyuanPageId(force) {\n    const page = await getSiyuanPage(force);\n    console.log(\"getSiyuanPageId.getSiyuanPage.result=>\", page)\n\n    const pageId = page.root_id || \"\"\n    console.log(\"获取本地缓存的思源笔记页面ID=>\", pageId)\n    return pageId\n}\n\n/**\n * 获取本地缓存的思源笔记页面信息（不是实时的，获取有变化的属性不要使用此方法，实时页面请将force传递为true）\n * @param force true代表强制调用查询不获取缓存\n * @returns {Promise<any>}\n */\nexport async function getSiyuanPage(force) {\n    // 默认读取缓存\n    if (!force && localStorage.siyuanPage) {\n        const pageObj = JSON.parse(localStorage.siyuanPage);\n        console.log(\"获取本地缓存的思源笔记页面信息（不是实时的，获取有变化的属性不要使用此方法，实时页面请将force传递为true=>\", pageObj)\n        return pageObj;\n    }\n\n    // 如果本地不存在，或者需要强制读取，调用api查询\n    const page = await getPage();\n    if (page) {\n        localStorage.siyuanPage = JSON.stringify(page);\n        console.log(\"调用API设置查询思源页面信息并更新本地缓存\", page)\n    }\n    return page;\n}"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,kBAAtB;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,eAAeC,eAAf,CAA+BC,KAA/B,EAAsC;EACzC,MAAMC,IAAI,GAAG,MAAMC,aAAa,CAACF,KAAD,CAAhC;EACAG,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAAsDH,IAAtD;EAEA,MAAMI,MAAM,GAAGJ,IAAI,CAACK,OAAL,IAAgB,EAA/B;EACAH,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCC,MAAjC;EACA,OAAOA,MAAP;AACH;AAED;AACA;AACA;AACA;AACA;;AACA,OAAO,eAAeH,aAAf,CAA6BF,KAA7B,EAAoC;EACvC;EACA,IAAI,CAACA,KAAD,IAAUO,YAAY,CAACC,UAA3B,EAAuC;IACnC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,UAAxB,CAAhB;IACAL,OAAO,CAACC,GAAR,CAAY,4DAAZ,EAA0EK,OAA1E;IACA,OAAOA,OAAP;EACH,CANsC,CAQvC;;;EACA,MAAMR,IAAI,GAAG,MAAMH,OAAO,EAA1B;;EACA,IAAIG,IAAJ,EAAU;IACNM,YAAY,CAACC,UAAb,GAA0BE,IAAI,CAACE,SAAL,CAAeX,IAAf,CAA1B;IACAE,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCH,IAAtC;EACH;;EACD,OAAOA,IAAP;AACH"},"metadata":{},"sourceType":"module"}