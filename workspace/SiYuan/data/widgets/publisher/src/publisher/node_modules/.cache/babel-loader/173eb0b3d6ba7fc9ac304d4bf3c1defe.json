{"ast":null,"code":"/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License\n * <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\nvar extend = require('xtend'),\n    LevelUPError = require('./errors').LevelUPError,\n    encodingNames = ['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le'],\n    defaultOptions = {\n  createIfMissing: true,\n  errorIfExists: false,\n  keyEncoding: 'utf8',\n  valueEncoding: 'utf8',\n  compression: true\n},\n    leveldown,\n    encodings = function () {\n  function isBinary(data) {\n    return data === undefined || data === null || Buffer.isBuffer(data);\n  }\n\n  var encodings = {};\n  encodings.utf8 = encodings['utf-8'] = {\n    encode: function (data) {\n      return isBinary(data) ? data : String(data);\n    },\n    decode: function (data) {\n      return data;\n    },\n    buffer: false,\n    type: 'utf8'\n  };\n  encodings.json = {\n    encode: JSON.stringify,\n    decode: JSON.parse,\n    buffer: false,\n    type: 'json'\n  };\n  encodingNames.forEach(function (type) {\n    if (encodings[type]) return;\n    encodings[type] = {\n      encode: function (data) {\n        return isBinary(data) ? data : new Buffer(data, type);\n      },\n      decode: function (buffer) {\n        return process.browser ? buffer.toString(type) : buffer;\n      },\n      buffer: true,\n      type: type // useful for debugging purposes\n\n    };\n  });\n  return encodings;\n}(),\n    encodingOpts = function () {\n  var eo = {};\n  encodingNames.forEach(function (e) {\n    eo[e] = {\n      valueEncoding: e\n    };\n  });\n  return eo;\n}();\n\nfunction copy(srcdb, dstdb, callback) {\n  srcdb.readStream().pipe(dstdb.writeStream()).on('close', callback ? callback : function () {}).on('error', callback ? callback : function (err) {\n    throw err;\n  });\n}\n\nfunction getOptions(levelup, options) {\n  var s = typeof options == 'string'; // just an encoding\n\n  if (!s && options && options.encoding && !options.valueEncoding) options.valueEncoding = options.encoding;\n  return extend(levelup && levelup.options || {}, s ? encodingOpts[options] || encodingOpts[defaultOptions.valueEncoding] : options);\n}\n\nfunction getLevelDOWN() {\n  if (leveldown) return leveldown;\n\n  var requiredVersion = require('../package.json').devDependencies.leveldown,\n      missingLevelDOWNError = 'Could not locate LevelDOWN, try `npm install leveldown`',\n      leveldownVersion;\n\n  try {\n    leveldownVersion = require('leveldown/package').version;\n  } catch (e) {\n    throw new LevelUPError(missingLevelDOWNError);\n  }\n\n  if (!require('semver').satisfies(leveldownVersion, requiredVersion)) {\n    throw new LevelUPError('Installed version of LevelDOWN (' + leveldownVersion + ') does not match required version (' + requiredVersion + ')');\n  }\n\n  try {\n    return leveldown = require('leveldown');\n  } catch (e) {\n    throw new LevelUPError(missingLevelDOWNError);\n  }\n}\n\nfunction dispatchError(levelup, error, callback) {\n  return typeof callback == 'function' ? callback(error) : levelup.emit('error', error);\n}\n\nfunction getKeyEncoder(options, op) {\n  var type = op && op.keyEncoding || options.keyEncoding || 'utf8';\n  return encodings[type] || type;\n}\n\nfunction getValueEncoder(options, op) {\n  var type = op && (op.valueEncoding || op.encoding) || options.valueEncoding || options.encoding || 'utf8';\n  return encodings[type] || type;\n}\n\nfunction encodeKey(key, options, op) {\n  return getKeyEncoder(options, op).encode(key);\n}\n\nfunction encodeValue(value, options, op) {\n  return getValueEncoder(options, op).encode(value);\n}\n\nfunction decodeKey(key, options) {\n  return getKeyEncoder(options).decode(key);\n}\n\nfunction decodeValue(value, options) {\n  return getValueEncoder(options).decode(value);\n}\n\nfunction isValueAsBuffer(options, op) {\n  return getValueEncoder(options, op).buffer;\n}\n\nfunction isKeyAsBuffer(options, op) {\n  return getKeyEncoder(options, op).buffer;\n}\n\nmodule.exports = {\n  defaultOptions: defaultOptions,\n  copy: copy,\n  getOptions: getOptions,\n  getLevelDOWN: getLevelDOWN,\n  dispatchError: dispatchError,\n  encodeKey: encodeKey,\n  encodeValue: encodeValue,\n  isValueAsBuffer: isValueAsBuffer,\n  isKeyAsBuffer: isKeyAsBuffer,\n  decodeValue: decodeValue,\n  decodeKey: decodeKey\n};","map":{"version":3,"names":["extend","require","LevelUPError","encodingNames","defaultOptions","createIfMissing","errorIfExists","keyEncoding","valueEncoding","compression","leveldown","encodings","isBinary","data","undefined","Buffer","isBuffer","utf8","encode","String","decode","buffer","type","json","JSON","stringify","parse","forEach","process","browser","toString","encodingOpts","eo","e","copy","srcdb","dstdb","callback","readStream","pipe","writeStream","on","err","getOptions","levelup","options","s","encoding","getLevelDOWN","requiredVersion","devDependencies","missingLevelDOWNError","leveldownVersion","version","satisfies","dispatchError","error","emit","getKeyEncoder","op","getValueEncoder","encodeKey","key","encodeValue","value","decodeKey","decodeValue","isValueAsBuffer","isKeyAsBuffer","module","exports"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/node_modules/levelup/lib/util.js"],"sourcesContent":["/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License\n * <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\n\nvar extend        = require('xtend')\n  , LevelUPError  = require('./errors').LevelUPError\n\n  , encodingNames = [\n        'hex'\n      , 'utf8'\n      , 'utf-8'\n      , 'ascii'\n      , 'binary'\n      , 'base64'\n      , 'ucs2'\n      , 'ucs-2'\n      , 'utf16le'\n      , 'utf-16le'\n    ]\n\n  , defaultOptions = {\n        createIfMissing : true\n      , errorIfExists   : false\n      , keyEncoding     : 'utf8'\n      , valueEncoding   : 'utf8'\n      , compression     : true\n    }\n\n  , leveldown\n\n  , encodings = (function () {\n      function isBinary (data) {\n        return data === undefined || data === null || Buffer.isBuffer(data)\n      }\n\n      var encodings = {}\n      encodings.utf8 = encodings['utf-8'] = {\n          encode : function (data) {\n            return isBinary(data) ? data : String(data)\n          }\n        , decode : function (data) {\n          return data\n          }\n        , buffer : false\n        , type   : 'utf8'\n      }\n      encodings.json = {\n          encode : JSON.stringify\n        , decode : JSON.parse\n        , buffer : false\n        , type   : 'json'\n      }\n      encodingNames.forEach(function (type) {\n        if (encodings[type])\n          return\n        encodings[type] = {\n            encode : function (data) {\n              return isBinary(data) ? data : new Buffer(data, type)\n            }\n          , decode : function (buffer) {\n              return process.browser ? buffer.toString(type) : buffer;\n            }\n          , buffer : true\n          , type   : type // useful for debugging purposes\n        }\n      })\n      return encodings\n    })()\n\n  , encodingOpts = (function () {\n      var eo = {}\n      encodingNames.forEach(function (e) {\n        eo[e] = { valueEncoding : e }\n      })\n      return eo\n    }())\n\nfunction copy (srcdb, dstdb, callback) {\n  srcdb.readStream()\n    .pipe(dstdb.writeStream())\n    .on('close', callback ? callback : function () {})\n    .on('error', callback ? callback : function (err) { throw err })\n}\n\nfunction getOptions (levelup, options) {\n  var s = typeof options == 'string' // just an encoding\n  if (!s && options && options.encoding && !options.valueEncoding)\n    options.valueEncoding = options.encoding\n  return extend(\n      (levelup && levelup.options) || {}\n    , s ? encodingOpts[options] || encodingOpts[defaultOptions.valueEncoding]\n        : options\n  )\n}\n\nfunction getLevelDOWN () {\n  if (leveldown)\n    return leveldown\n\n  var requiredVersion       = require('../package.json').devDependencies.leveldown\n    , missingLevelDOWNError = 'Could not locate LevelDOWN, try `npm install leveldown`'\n    , leveldownVersion\n\n  try {\n    leveldownVersion = require('leveldown/package').version\n  } catch (e) {\n    throw new LevelUPError(missingLevelDOWNError)\n  }\n\n  if (!require('semver').satisfies(leveldownVersion, requiredVersion)) {\n    throw new LevelUPError(\n        'Installed version of LevelDOWN ('\n      + leveldownVersion\n      + ') does not match required version ('\n      + requiredVersion\n      + ')'\n    )\n  }\n\n  try {\n    return leveldown = require('leveldown')\n  } catch (e) {\n    throw new LevelUPError(missingLevelDOWNError)\n  }\n}\n\nfunction dispatchError (levelup, error, callback) {\n  return typeof callback == 'function'\n    ? callback(error)\n    : levelup.emit('error', error)\n}\n\nfunction getKeyEncoder (options, op) {\n  var type = ((op && op.keyEncoding) || options.keyEncoding) || 'utf8'\n  return encodings[type] || type\n}\n\nfunction getValueEncoder (options, op) {\n  var type = (((op && (op.valueEncoding || op.encoding))\n      || options.valueEncoding || options.encoding)) || 'utf8'\n  return encodings[type] || type\n}\n\nfunction encodeKey (key, options, op) {\n  return getKeyEncoder(options, op).encode(key)\n}\n\nfunction encodeValue (value, options, op) {\n  return getValueEncoder(options, op).encode(value)\n}\n\nfunction decodeKey (key, options) {\n  return getKeyEncoder(options).decode(key)\n}\n\nfunction decodeValue (value, options) {\n  return getValueEncoder(options).decode(value)\n}\n\nfunction isValueAsBuffer (options, op) {\n  return getValueEncoder(options, op).buffer\n}\n\nfunction isKeyAsBuffer (options, op) {\n  return getKeyEncoder(options, op).buffer\n}\n\nmodule.exports = {\n    defaultOptions  : defaultOptions\n  , copy            : copy\n  , getOptions      : getOptions\n  , getLevelDOWN    : getLevelDOWN\n  , dispatchError   : dispatchError\n  , encodeKey       : encodeKey\n  , encodeValue     : encodeValue\n  , isValueAsBuffer : isValueAsBuffer\n  , isKeyAsBuffer   : isKeyAsBuffer\n  , decodeValue     : decodeValue\n  , decodeKey       : decodeKey\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}