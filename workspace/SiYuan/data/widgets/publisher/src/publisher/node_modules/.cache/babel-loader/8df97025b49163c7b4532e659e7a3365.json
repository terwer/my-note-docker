{"ast":null,"code":"/**\n * 去除html标签，残缺不全也可以\n * @param html html\n * @returns {string} 转换后的结果\n */\nfunction filterHtml(html) {\n  /*\n   * <.*?>为正则表达式，其中的.表示任意字符，*?表示出现0次或0次以上，此方法可以去掉双头标签(双头针对于残缺的标签)\n   * \"<.*?\"表示<尖括号后的所有字符，此方法可以去掉残缺的标签，及后面的内容\n   * \" \"，若有多种此种字符，可用同一方法去除\n   */\n  html = html.replaceAll(/<.*?>/g, \"\");\n  html = html.replaceAll(/<.*?/g, \"\");\n  html = html.replaceAll(/\\\\n/g, \"\");\n  html = html.replaceAll(/\\\\t/g, \"\");\n  html = html.replace(\"&quot;\", \"\");\n  html = html.replace(\" \", \"\");\n  html = html.replace(\":\", \"\");\n  html = html.replace(\";\", \"\");\n  html = html.replace(\",\", \"\");\n  html = html.replace(\".\", \"\");\n  html = html.replace(\".\", \"\");\n  html = html.replace(\"(\", \"\");\n  html = html.replace(\")\", \"\");\n  html = html.replace(\"'\", \"\");\n  html = html.replace(\"\\\"\", \"\");\n  html = html.replace(\"+\", \"\");\n  html = html.replace(\"=\", \"\");\n  html = html.replace(\"-\", \"\");\n  html = html.toLowerCase();\n  return html;\n}\n/**\n * 截取指定长度html\n * @param html html\n * @param length 长度\n * @returns {string} 结果\n */\n\n\nexport function parseHtml(html, length) {\n  let allText = filterHtml(html);\n\n  if (allText.length < length) {\n    return allText;\n  }\n\n  return allText.substring(0, length) + \"...\";\n}","map":{"version":3,"names":["filterHtml","html","replaceAll","replace","toLowerCase","parseHtml","length","allText","substring"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/src/lib/htmlUtil.js"],"sourcesContent":["/**\n * 去除html标签，残缺不全也可以\n * @param html html\n * @returns {string} 转换后的结果\n */\nfunction filterHtml(html) {\n    /*\n     * <.*?>为正则表达式，其中的.表示任意字符，*?表示出现0次或0次以上，此方法可以去掉双头标签(双头针对于残缺的标签)\n     * \"<.*?\"表示<尖括号后的所有字符，此方法可以去掉残缺的标签，及后面的内容\n     * \" \"，若有多种此种字符，可用同一方法去除\n     */\n    html = html.replaceAll(/<.*?>/g, \"\");\n    html = html.replaceAll(/<.*?/g, \"\");\n    html = html.replaceAll(/\\\\n/g, \"\");\n    html = html.replaceAll(/\\\\t/g, \"\");\n    html = html.replace(\"&quot;\", \"\");\n    html = html.replace(\" \", \"\");\n    html = html.replace(\":\", \"\");\n    html = html.replace(\";\", \"\");\n    html = html.replace(\",\", \"\");\n    html = html.replace(\".\", \"\");\n    html = html.replace(\".\", \"\");\n    html = html.replace(\"(\", \"\");\n    html = html.replace(\")\", \"\");\n    html = html.replace(\"'\", \"\");\n    html = html.replace(\"\\\"\", \"\");\n    html = html.replace(\"+\", \"\");\n    html = html.replace(\"=\", \"\");\n    html = html.replace(\"-\", \"\");\n    html = html.toLowerCase();\n    return html;\n}\n\n/**\n * 截取指定长度html\n * @param html html\n * @param length 长度\n * @returns {string} 结果\n */\nexport function parseHtml(html, length) {\n    let allText = filterHtml(html);\n    if (allText.length < length) {\n        return allText;\n    }\n    return allText.substring(0, length) + \"...\";\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAT,CAAoBC,IAApB,EAA0B;EACtB;AACJ;AACA;AACA;AACA;EACIA,IAAI,GAAGA,IAAI,CAACC,UAAL,CAAgB,QAAhB,EAA0B,EAA1B,CAAP;EACAD,IAAI,GAAGA,IAAI,CAACC,UAAL,CAAgB,OAAhB,EAAyB,EAAzB,CAAP;EACAD,IAAI,GAAGA,IAAI,CAACC,UAAL,CAAgB,MAAhB,EAAwB,EAAxB,CAAP;EACAD,IAAI,GAAGA,IAAI,CAACC,UAAL,CAAgB,MAAhB,EAAwB,EAAxB,CAAP;EACAD,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,QAAb,EAAuB,EAAvB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAP;EACAF,IAAI,GAAGA,IAAI,CAACG,WAAL,EAAP;EACA,OAAOH,IAAP;AACH;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,OAAO,SAASI,SAAT,CAAmBJ,IAAnB,EAAyBK,MAAzB,EAAiC;EACpC,IAAIC,OAAO,GAAGP,UAAU,CAACC,IAAD,CAAxB;;EACA,IAAIM,OAAO,CAACD,MAAR,GAAiBA,MAArB,EAA6B;IACzB,OAAOC,OAAP;EACH;;EACD,OAAOA,OAAO,CAACC,SAAR,CAAkB,CAAlB,EAAqBF,MAArB,IAA+B,KAAtC;AACH"},"metadata":{},"sourceType":"module"}