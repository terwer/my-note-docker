{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/*\n * utils.js: Utility functions for the nconf module.\n *\n * (C) 2011, Charlie Robbins and the Contributors.\n *\n */\nvar fs = require('fs'),\n    async = require('async'),\n    formats = require('./formats'),\n    Memory = require('./stores/memory').Memory;\n\nvar common = exports; //\n// ### function path (key)\n// #### @key {string} The ':' delimited key to split\n// Returns a fully-qualified path to a nested nconf key.\n// If given null or undefined it should return an empty path.\n// '' should still be respected as a path.\n//\n\ncommon.path = function (key, separator) {\n  separator = separator || ':';\n  return key == null ? [] : key.split(separator);\n}; //\n// ### function key (arguments)\n// Returns a `:` joined string from the `arguments`.\n//\n\n\ncommon.key = function () {\n  return Array.prototype.slice.call(arguments).join(':');\n}; //\n// ### function key (arguments)\n// Returns a joined string from the `arguments`,\n// first argument is the join delimiter.\n//\n\n\ncommon.keyed = function () {\n  return Array.prototype.slice.call(arguments, 1).join(arguments[0]);\n}; //\n// ### function loadFiles (files, callback)\n// #### @files {Object|Array} List of files (or settings object) to load.\n// #### @callback {function} Continuation to respond to when complete.\n// Loads all the data in the specified `files`.\n//\n\n\ncommon.loadFiles = function (files, callback) {\n  if (!files) {\n    return callback(null, {});\n  }\n\n  var options = Array.isArray(files) ? {\n    files: files\n  } : files; //\n  // Set the default JSON format if not already\n  // specified\n  //\n\n  options.format = options.format || formats.json;\n\n  function parseFile(file, next) {\n    fs.readFile(file, function (err, data) {\n      return !err ? next(null, options.format.parse(data.toString())) : next(err);\n    });\n  }\n\n  async.map(options.files, parseFile, function (err, objs) {\n    return err ? callback(err) : callback(null, common.merge(objs));\n  });\n}; //\n// ### function loadFilesSync (files)\n// #### @files {Object|Array} List of files (or settings object) to load.\n// Loads all the data in the specified `files` synchronously.\n//\n\n\ncommon.loadFilesSync = function (files) {\n  if (!files) {\n    return;\n  } //\n  // Set the default JSON format if not already\n  // specified\n  //\n\n\n  var options = Array.isArray(files) ? {\n    files: files\n  } : files;\n  options.format = options.format || formats.json;\n  return common.merge(options.files.map(function (file) {\n    return options.format.parse(fs.readFileSync(file, 'utf8'));\n  }));\n}; //\n// ### function merge (objs)\n// #### @objs {Array} Array of object literals to merge\n// Merges the specified `objs` using a temporary instance\n// of `stores.Memory`.\n//\n\n\ncommon.merge = function (objs) {\n  var store = new Memory();\n  objs.forEach(function (obj) {\n    Object.keys(obj).forEach(function (key) {\n      store.merge(key, obj[key]);\n    });\n  });\n  return store.store;\n}; //\n// ### function capitalize (str)\n// #### @str {string} String to capitalize\n// Capitalizes the specified `str`.\n//\n\n\ncommon.capitalize = function (str) {\n  return str && str[0].toUpperCase() + str.slice(1);\n}; //\n// ### function parseValues (any)\n// #### @any {string} String to parse as native data-type or return as is\n// try to parse `any` as a native data-type\n//\n\n\ncommon.parseValues = function (value) {\n  var val = value;\n\n  try {\n    val = JSON.parse(value);\n  } catch (ignore) {\n    // Check for any other well-known strings that should be \"parsed\"\n    if (value === 'undefined') {\n      val = void 0;\n    }\n  }\n\n  return val;\n}; //\n// ### function transform(map, fn)\n// #### @map {object} Object of key/value pairs to apply `fn` to\n// #### @fn {function} Transformation function that will be applied to every key/value pair\n// transform a set of key/value pairs and return the transformed result\n\n\ncommon.transform = function (map, fn) {\n  var pairs = Object.keys(map).map(function (key) {\n    var obj = {\n      key: key,\n      value: map[key]\n    };\n    var result = fn.call(null, obj);\n\n    if (!result) {\n      return null;\n    } else if (result.key) {\n      return result;\n    }\n\n    var error = new Error('Transform function passed to store returned an invalid format: ' + JSON.stringify(result));\n    error.name = 'RuntimeError';\n    throw error;\n  });\n  return pairs.filter(function (pair) {\n    return pair !== null;\n  }).reduce(function (accumulator, pair) {\n    accumulator[pair.key] = pair.value;\n    return accumulator;\n  }, {});\n};","map":{"version":3,"names":["fs","require","async","formats","Memory","common","exports","path","key","separator","split","Array","prototype","slice","call","arguments","join","keyed","loadFiles","files","callback","options","isArray","format","json","parseFile","file","next","readFile","err","data","parse","toString","map","objs","merge","loadFilesSync","readFileSync","store","forEach","obj","Object","keys","capitalize","str","toUpperCase","parseValues","value","val","JSON","ignore","transform","fn","pairs","result","error","Error","stringify","name","filter","pair","reduce","accumulator"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/node_modules/nconf/lib/nconf/common.js"],"sourcesContent":["/*\n * utils.js: Utility functions for the nconf module.\n *\n * (C) 2011, Charlie Robbins and the Contributors.\n *\n */\n\nvar fs = require('fs'),\n    async = require('async'),\n    formats = require('./formats'),\n    Memory = require('./stores/memory').Memory;\n\nvar common = exports;\n\n//\n// ### function path (key)\n// #### @key {string} The ':' delimited key to split\n// Returns a fully-qualified path to a nested nconf key.\n// If given null or undefined it should return an empty path.\n// '' should still be respected as a path.\n//\ncommon.path = function (key, separator) {\n  separator = separator || ':';\n  return key == null ? [] : key.split(separator);\n};\n\n//\n// ### function key (arguments)\n// Returns a `:` joined string from the `arguments`.\n//\ncommon.key = function () {\n  return Array.prototype.slice.call(arguments).join(':');\n};\n\n//\n// ### function key (arguments)\n// Returns a joined string from the `arguments`,\n// first argument is the join delimiter.\n//\ncommon.keyed = function () {\n  return Array.prototype.slice.call(arguments, 1).join(arguments[0]);\n};\n\n//\n// ### function loadFiles (files, callback)\n// #### @files {Object|Array} List of files (or settings object) to load.\n// #### @callback {function} Continuation to respond to when complete.\n// Loads all the data in the specified `files`.\n//\ncommon.loadFiles = function (files, callback) {\n  if (!files) {\n    return callback(null, {});\n  }\n\n  var options = Array.isArray(files) ? { files: files } : files;\n\n  //\n  // Set the default JSON format if not already\n  // specified\n  //\n  options.format = options.format || formats.json;\n\n  function parseFile (file, next) {\n    fs.readFile(file, function (err, data) {\n      return !err\n        ? next(null, options.format.parse(data.toString()))\n        : next(err);\n    });\n  }\n\n  async.map(options.files, parseFile, function (err, objs) {\n    return err ? callback(err) : callback(null, common.merge(objs));\n  });\n};\n\n//\n// ### function loadFilesSync (files)\n// #### @files {Object|Array} List of files (or settings object) to load.\n// Loads all the data in the specified `files` synchronously.\n//\ncommon.loadFilesSync = function (files) {\n  if (!files) {\n    return;\n  }\n\n  //\n  // Set the default JSON format if not already\n  // specified\n  //\n  var options = Array.isArray(files) ? { files: files } : files;\n  options.format = options.format || formats.json;\n\n  return common.merge(options.files.map(function (file) {\n    return options.format.parse(fs.readFileSync(file, 'utf8'));\n  }));\n};\n\n//\n// ### function merge (objs)\n// #### @objs {Array} Array of object literals to merge\n// Merges the specified `objs` using a temporary instance\n// of `stores.Memory`.\n//\ncommon.merge = function (objs) {\n  var store = new Memory();\n\n  objs.forEach(function (obj) {\n    Object.keys(obj).forEach(function (key) {\n      store.merge(key, obj[key]);\n    });\n  });\n\n  return store.store;\n};\n\n//\n// ### function capitalize (str)\n// #### @str {string} String to capitalize\n// Capitalizes the specified `str`.\n//\ncommon.capitalize = function (str) {\n  return str && str[0].toUpperCase() + str.slice(1);\n};\n\n//\n// ### function parseValues (any)\n// #### @any {string} String to parse as native data-type or return as is\n// try to parse `any` as a native data-type\n//\ncommon.parseValues = function (value) {\n  var val = value;\n  \n  try {\n    val = JSON.parse(value);\n  } catch (ignore) {\n    // Check for any other well-known strings that should be \"parsed\"\n    if (value === 'undefined'){\n      val = void 0;\n    }\n  }\n\n  return val;\n};\n\n//\n// ### function transform(map, fn)\n// #### @map {object} Object of key/value pairs to apply `fn` to\n// #### @fn {function} Transformation function that will be applied to every key/value pair\n// transform a set of key/value pairs and return the transformed result\ncommon.transform = function(map, fn) {\n  var pairs = Object.keys(map).map(function(key) {\n    var obj = { key: key, value: map[key]};\n    var result = fn.call(null, obj);\n\n    if (!result) {\n      return null;\n    } else if (result.key) {\n      return result;\n    }\n\n    var error = new Error('Transform function passed to store returned an invalid format: ' + JSON.stringify(result));\n    error.name = 'RuntimeError';\n    throw error;\n  });\n\n\n  return pairs\n    .filter(function(pair) {\n      return pair !== null;\n    })\n    .reduce(function(accumulator, pair) {\n      accumulator[pair.key] = pair.value;\n      return accumulator;\n    }, {});\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}