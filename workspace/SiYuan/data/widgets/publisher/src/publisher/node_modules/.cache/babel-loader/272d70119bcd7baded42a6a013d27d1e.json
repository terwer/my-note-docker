{"ast":null,"code":"var Writable = require('readable-stream/writable');\n\nvar Readable = require('readable-stream/readable');\n\nvar peek = require('level-peek');\n\nvar util = require('util');\n\nvar once = require('once');\n\nvar EMPTY = new Buffer(0);\nvar ENCODER = {\n  encode: function (data) {\n    return typeof data === 'string' ? data = new Buffer(data) : data;\n  },\n  decode: function (data) {\n    return Buffer.isBuffer(data) ? data : new Buffer(data);\n  },\n  buffer: true,\n  type: 'raw'\n};\n\nvar noop = function () {};\n\nvar pad = function (n) {\n  n = n.toString(16);\n  return '00000000'.slice(0, -n.length) + n;\n};\n\nvar expand = function (buf, len) {\n  var tmp = new Buffer(len);\n  buf.copy(tmp);\n  return tmp;\n};\n\nmodule.exports = function (db, opts) {\n  if (!opts) opts = {};\n  var blobs = {};\n  var blockSize = opts.blockSize || 65536;\n  var maxBatch = opts.batch || 100;\n  var blank = new Buffer(blockSize);\n  db.put('\\x00', 'ignore', noop); // memdown#12 workaround\n\n  var reservations = {};\n\n  var mutateBlock = function (key, offset, block, append, cb) {\n    var release = function () {\n      if (! --reservations[key].locks) delete reservations[key];\n    };\n\n    var onreservation = function (r) {\n      r.locks++;\n\n      if (!r.block && !offset) {\n        r.block = block;\n        cb(null, r.block, release);\n        return;\n      }\n\n      if (!r.block) r.block = new Buffer(blockSize);\n      if (r.block.length < offset + block.length) r.block = expand(r.block, offset + block.length);\n      block.copy(r.block, offset);\n      if (!append && offset + block.length < r.block.length) r.block = r.block.slice(0, offset + block.length);\n      cb(null, r.block, release);\n    };\n\n    if (reservations[key]) return onreservation(reservations[key]);\n    db.get(key, {\n      valueEncoding: ENCODER\n    }, function (err, block) {\n      if (err && !err.notFound) return cb(err);\n      if (!reservations[key]) reservations[key] = {\n        locks: 0,\n        block: block\n      };\n      onreservation(reservations[key]);\n    });\n  };\n\n  var WriteStream = function (name, opts) {\n    if (!(this instanceof WriteStream)) return new WriteStream(name, opts);\n    if (!opts) opts = {};\n    this.name = name;\n    this.blocks = [];\n    this.batch = [];\n    this.bytesWritten = 0;\n    this.truncate = !opts.append;\n    this.append = opts.append;\n    this._shouldInitAppend = this.append && opts.start === undefined;\n    this._destroyed = false;\n\n    this._init(opts.start || 0);\n\n    Writable.call(this);\n  };\n\n  util.inherits(WriteStream, Writable);\n\n  WriteStream.prototype._init = function (start) {\n    this.blockIndex = start / blockSize | 0;\n    this.blockOffset = start - this.blockIndex * blockSize;\n    this.blockLength = this.blockOffset;\n  };\n\n  WriteStream.prototype._flush = function (cb) {\n    if (!this.batch.length) return cb();\n    var key = this.batch[this.batch.length - 1].key;\n    var batch = this.batch;\n    this.batch = [];\n    if (!this.truncate) return db.batch(batch, cb);\n    this.truncate = false;\n\n    this._truncate(batch, key, cb);\n  };\n\n  WriteStream.prototype._truncate = function (batch, key, cb) {\n    cb = once(cb);\n    var dels = [];\n    var keys = db.createKeyStream({\n      start: key,\n      end: this.name + '\\xff\\xff'\n    });\n    keys.on('error', cb);\n    keys.on('data', function (key) {\n      dels.push({\n        type: 'del',\n        key: key\n      });\n    });\n    keys.on('end', function () {\n      dels.push.apply(dels, batch);\n      db.batch(dels, cb);\n    });\n  };\n\n  WriteStream.prototype._writeBlock = function (cb) {\n    var block = this.blocks.length === 1 ? this.blocks[0] : Buffer.concat(this.blocks, this.blockLength - this.blockOffset);\n    var index = this.blockIndex;\n    var offset = this.blockOffset;\n    var self = this;\n    this.blockOffset = 0;\n    this.blockLength = 0;\n    this.blockIndex++;\n    this.blocks = [];\n    var key = this.name + '\\xff' + pad(index);\n\n    var append = function (block, force, cb) {\n      if (block.length) {\n        self.batch.push({\n          type: 'put',\n          key: key,\n          value: block,\n          valueEncoding: ENCODER\n        });\n      }\n\n      if (!force && self.batch.length < maxBatch) return cb();\n      return self._flush(cb);\n    };\n\n    if (!offset && block.length === blockSize) return append(block, false, cb);\n    if (!offset && !this.append) return append(block, false, cb); // partial write\n\n    mutateBlock(key, offset, block, this.append, function (err, block, release) {\n      if (err) return cb(err);\n      append(block, true, function (err) {\n        release();\n        cb(err);\n      });\n    });\n  };\n\n  WriteStream.prototype._initAppend = function (data, enc, cb) {\n    var self = this;\n    this._shouldInitAppend = false;\n    blobs.size(this.name, function (err, size) {\n      if (err) return cb(err);\n\n      self._init(size);\n\n      self._write(data, enc, cb);\n    });\n  };\n\n  WriteStream.prototype._write = function (data, enc, cb) {\n    if (!data.length || this._destroyed) return cb();\n    if (this._shouldInitAppend) return this._initAppend(data, enc, cb);\n    var self = this;\n    var overflow;\n    var free = blockSize - this.blockLength;\n\n    var done = function (err) {\n      if (err) return cb(err);\n      if (overflow) return self._write(overflow, enc, cb);\n      cb();\n    };\n\n    if (data.length > free) {\n      overflow = data.slice(free);\n      data = data.slice(0, free);\n    }\n\n    this.bytesWritten += data.length;\n    this.blockLength += data.length;\n    this.blocks.push(data);\n    if (data.length < free) return done();\n\n    this._writeBlock(done);\n  };\n\n  WriteStream.prototype.destroy = function () {\n    if (this._destroyed) return;\n    this._destroyed = true;\n    process.nextTick(this.emit.bind(this, 'close'));\n  };\n\n  WriteStream.prototype.end = function (data) {\n    var self = this;\n    var args = arguments;\n\n    if (data && typeof data !== 'function') {\n      this.write(data);\n      data = EMPTY;\n    }\n\n    this.write(EMPTY, function () {\n      self._writeBlock(function (err) {\n        if (err) return self.emit('error', err);\n\n        self._flush(function (err) {\n          if (err) return self.emit('error', err);\n          Writable.prototype.end.apply(self, args);\n        });\n      });\n    });\n  };\n\n  var ReadStream = function (name, opts) {\n    if (!opts) opts = {};\n    var self = this;\n    var start = opts.start || 0;\n    var blockIndex = start / blockSize | 0;\n    var blockOffset = start - blockIndex * blockSize;\n    var key = name + '\\xff' + pad(blockIndex);\n    this.name = name;\n    this._missing = (typeof opts.end === 'number' ? opts.end : Infinity) - start + 1;\n    this._paused = false;\n    this._destroyed = false;\n    this._reader = db.createReadStream({\n      start: key,\n      end: name + '\\xff\\xff',\n      valueEncoding: ENCODER\n    });\n\n    var onblock = function (val) {\n      key = name + '\\xff' + pad(++blockIndex);\n      if (!self._missing) return false;\n\n      if (blockOffset) {\n        val = val.slice(blockOffset);\n        blockOffset = 0;\n        if (!val.length) return true;\n      }\n\n      if (val.length > self._missing) val = val.slice(0, self._missing);\n      self._missing -= val.length;\n\n      self._pause(!self.push(val));\n\n      return !!self._missing;\n    };\n\n    this._reader.on('data', function (data) {\n      while (data.key > key) {\n        if (!onblock(blank)) return;\n      }\n\n      onblock(data.value);\n    });\n\n    this._reader.on('error', function (err) {\n      self.emit('error', err);\n    });\n\n    this._reader.on('end', function () {\n      self.push(null);\n    });\n\n    Readable.call(this);\n  };\n\n  util.inherits(ReadStream, Readable);\n\n  ReadStream.prototype.destroy = function () {\n    if (this._destroyed) return;\n    this._destroyed = true;\n\n    this._reader.destroy();\n\n    process.nextTick(this.emit.bind(this, 'close'));\n  };\n\n  ReadStream.prototype._pause = function (paused) {\n    if (this._paused === paused) return;\n    this._paused = paused;\n    if (this._paused) this._reader.pause();else this._reader.resume();\n  };\n\n  ReadStream.prototype._read = function () {\n    this._pause(false);\n  };\n\n  blobs.remove = function (name, cb) {\n    cb = once(cb || noop);\n    var batch = [];\n    var keys = db.createKeyStream({\n      start: name + '\\xff',\n      end: name + '\\xff\\xff'\n    });\n    keys.on('error', cb);\n    keys.on('data', function (key) {\n      batch.push({\n        type: 'del',\n        key: key\n      });\n    });\n    keys.on('end', function () {\n      db.batch(batch, cb);\n    });\n  };\n\n  blobs.size = function (name, cb) {\n    peek.last(db, {\n      start: name + '\\xff',\n      end: name + '\\xff\\xff',\n      valueEncoding: ENCODER\n    }, function (err, latest, val) {\n      if (err && err.message === 'range not found') return cb(null, 0);\n      if (err) return cb(err);\n      if (latest.slice(0, name.length + 1) !== name + '\\xff') return cb(null, 0);\n      cb(null, parseInt(latest.toString().slice(name.length + 1), 16) * blockSize + val.length);\n    });\n  };\n\n  blobs.write = function (name, data, opts, cb) {\n    if (typeof opts === 'function') return blobs.write(name, data, null, opts);\n    if (!opts) opts = {};\n    if (!cb) cb = noop;\n    var ws = blobs.createWriteStream(name, opts);\n    ws.on('error', cb);\n    ws.on('finish', function () {\n      cb();\n    });\n    ws.write(data);\n    ws.end();\n  };\n\n  blobs.read = function (name, opts, cb) {\n    if (typeof opts === 'function') return blobs.read(name, null, opts);\n    if (!opts) opts = {};\n    var rs = blobs.createReadStream(name, opts);\n    var list = [];\n    rs.on('error', cb);\n    rs.on('data', function (data) {\n      list.push(data);\n    });\n    rs.on('end', function () {\n      cb(null, list.length === 1 ? list[0] : Buffer.concat(list));\n    });\n  };\n\n  blobs.createReadStream = function (name, opts) {\n    return new ReadStream(name, opts);\n  };\n\n  blobs.createWriteStream = function (name, opts) {\n    return new WriteStream(name, opts);\n  };\n\n  return blobs;\n};","map":{"version":3,"names":["Writable","require","Readable","peek","util","once","EMPTY","Buffer","ENCODER","encode","data","decode","isBuffer","buffer","type","noop","pad","n","toString","slice","length","expand","buf","len","tmp","copy","module","exports","db","opts","blobs","blockSize","maxBatch","batch","blank","put","reservations","mutateBlock","key","offset","block","append","cb","release","locks","onreservation","r","get","valueEncoding","err","notFound","WriteStream","name","blocks","bytesWritten","truncate","_shouldInitAppend","start","undefined","_destroyed","_init","call","inherits","prototype","blockIndex","blockOffset","blockLength","_flush","_truncate","dels","keys","createKeyStream","end","on","push","apply","_writeBlock","concat","index","self","force","value","_initAppend","enc","size","_write","overflow","free","done","destroy","process","nextTick","emit","bind","args","arguments","write","ReadStream","_missing","Infinity","_paused","_reader","createReadStream","onblock","val","_pause","paused","pause","resume","_read","remove","last","latest","message","parseInt","ws","createWriteStream","read","rs","list"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/node_modules/level-blobs/index.js"],"sourcesContent":["var Writable = require('readable-stream/writable');\nvar Readable = require('readable-stream/readable');\nvar peek = require('level-peek');\nvar util = require('util');\nvar once = require('once');\n\nvar EMPTY = new Buffer(0);\nvar ENCODER = {\n\tencode: function(data) {\n\t\treturn typeof data === 'string' ? data = new Buffer(data) : data;\n\t},\n\tdecode: function(data) {\n\t\treturn Buffer.isBuffer(data) ? data : new Buffer(data);\n\t},\n\tbuffer: true,\n\ttype: 'raw'\n};\n\nvar noop = function() {};\n\nvar pad = function(n) {\n\tn = n.toString(16);\n\treturn '00000000'.slice(0, -n.length)+n;\n};\n\nvar expand = function(buf, len) {\n\tvar tmp = new Buffer(len);\n\tbuf.copy(tmp);\n\treturn tmp;\n};\n\nmodule.exports = function(db, opts) {\n\tif (!opts) opts = {};\n\n\tvar blobs = {};\n\n\tvar blockSize = opts.blockSize || 65536;\n\tvar maxBatch = opts.batch || 100;\n\tvar blank = new Buffer(blockSize);\n\n\tdb.put('\\x00', 'ignore', noop); // memdown#12 workaround\n\n\tvar reservations = {};\n\tvar mutateBlock = function(key, offset, block, append, cb) {\n\t\tvar release = function() {\n\t\t\tif (!--reservations[key].locks) delete reservations[key];\n\t\t};\n\n\t\tvar onreservation = function(r) {\n\t\t\tr.locks++;\n\n\t\t\tif (!r.block && !offset) {\n\t\t\t\tr.block = block;\n\t\t\t\tcb(null, r.block, release);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!r.block) r.block = new Buffer(blockSize);\n\t\t\tif (r.block.length < offset + block.length) r.block = expand(r.block, offset + block.length);\n\n\t\t\tblock.copy(r.block, offset);\n\n\t\t\tif (!append && offset + block.length < r.block.length) r.block = r.block.slice(0, offset+block.length);\n\t\t\tcb(null, r.block, release);\n\t\t};\n\n\t\tif (reservations[key]) return onreservation(reservations[key]);\n\n\t\tdb.get(key, {valueEncoding:ENCODER}, function(err, block) {\n\t\t\tif (err && !err.notFound) return cb(err);\n\t\t\tif (!reservations[key]) reservations[key] = {locks:0, block:block};\n\t\t\tonreservation(reservations[key]);\n\t\t});\n\t};\n\n\tvar WriteStream = function(name, opts) {\n\t\tif (!(this instanceof WriteStream)) return new WriteStream(name, opts);\n\t\tif (!opts) opts = {};\n\n\t\tthis.name = name;\n\t\tthis.blocks = [];\n\t\tthis.batch = [];\n\t\tthis.bytesWritten = 0;\n\t\tthis.truncate = !opts.append;\n\t\tthis.append = opts.append;\n\n\t\tthis._shouldInitAppend = this.append && opts.start === undefined;\n\t\tthis._destroyed = false;\n\t\tthis._init(opts.start || 0);\n\n\t\tWritable.call(this);\n\t};\n\n\tutil.inherits(WriteStream, Writable);\n\n\tWriteStream.prototype._init = function(start) {\n\t\tthis.blockIndex = (start / blockSize) | 0;\n\t\tthis.blockOffset = start - this.blockIndex * blockSize;\n\t\tthis.blockLength = this.blockOffset;\n\t};\n\n\tWriteStream.prototype._flush = function(cb) {\n\t\tif (!this.batch.length) return cb();\n\n\t\tvar key = this.batch[this.batch.length-1].key;\n\t\tvar batch = this.batch;\n\t\tthis.batch = [];\n\n\t\tif (!this.truncate) return db.batch(batch, cb);\n\t\tthis.truncate = false;\n\t\tthis._truncate(batch, key, cb);\n\t};\n\n\tWriteStream.prototype._truncate = function(batch, key, cb) {\n\t\tcb = once(cb);\n\n\t\tvar dels = [];\n\t\tvar keys = db.createKeyStream({\n\t\t\tstart: key,\n\t\t\tend: this.name+'\\xff\\xff'\n\t\t});\n\n\t\tkeys.on('error', cb);\n\n\t\tkeys.on('data', function(key) {\n\t\t\tdels.push({type:'del', key:key});\n\t\t});\n\n\t\tkeys.on('end', function() {\n\t\t\tdels.push.apply(dels, batch);\n\t\t\tdb.batch(dels, cb);\n\t\t});\n\t};\n\n\tWriteStream.prototype._writeBlock = function(cb) {\n\t\tvar block = this.blocks.length === 1 ? this.blocks[0] : Buffer.concat(this.blocks, this.blockLength - this.blockOffset);\n\t\tvar index = this.blockIndex;\n\t\tvar offset = this.blockOffset;\n\t\tvar self = this;\n\n\t\tthis.blockOffset = 0;\n\t\tthis.blockLength = 0;\n\t\tthis.blockIndex++;\n\t\tthis.blocks = [];\n\n\t\tvar key = this.name+'\\xff'+pad(index);\n\n\t\tvar append = function(block, force, cb) {\n\t\t\tif (block.length) {\n\t\t\t\tself.batch.push({\n\t\t\t\t\ttype: 'put',\n\t\t\t\t\tkey: key,\n\t\t\t\t\tvalue: block,\n\t\t\t\t\tvalueEncoding: ENCODER\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!force && self.batch.length < maxBatch) return cb();\n\t\t\treturn self._flush(cb);\n\t\t};\n\n\t\tif (!offset && block.length === blockSize) return append(block, false, cb);\n\t\tif (!offset && !this.append) return append(block, false, cb);\n\n\t\t// partial write\n\t\tmutateBlock(key, offset, block, this.append, function(err, block, release) {\n\t\t\tif (err) return cb(err);\n\t\t\tappend(block, true, function(err) {\n\t\t\t\trelease();\n\t\t\t\tcb(err);\n\t\t\t});\n\t\t});\n\t};\n\n\tWriteStream.prototype._initAppend = function(data, enc, cb) {\n\t\tvar self = this;\n\t\tthis._shouldInitAppend = false;\n\t\tblobs.size(this.name, function(err, size) {\n\t\t\tif (err) return cb(err);\n\t\t\tself._init(size);\n\t\t\tself._write(data, enc, cb);\n\t\t});\n\t};\n\n\tWriteStream.prototype._write = function(data, enc, cb) {\n\t\tif (!data.length || this._destroyed) return cb();\n\t\tif (this._shouldInitAppend) return this._initAppend(data, enc, cb);\n\n\t\tvar self = this;\n\t\tvar overflow;\n\t\tvar free = blockSize - this.blockLength;\n\n\t\tvar done = function(err) {\n\t\t\tif (err) return cb(err);\n\t\t\tif (overflow) return self._write(overflow, enc, cb);\n\t\t\tcb();\n\t\t};\n\n\t\tif (data.length > free) {\n\t\t\toverflow = data.slice(free);\n\t\t\tdata = data.slice(0, free);\n\t\t}\n\n\t\tthis.bytesWritten += data.length;\n\t\tthis.blockLength += data.length;\n\t\tthis.blocks.push(data);\n\n\t\tif (data.length < free) return done();\n\t\tthis._writeBlock(done);\n\t};\n\n\tWriteStream.prototype.destroy = function() {\n\t\tif (this._destroyed) return;\n\t\tthis._destroyed = true;\n\t\tprocess.nextTick(this.emit.bind(this, 'close'));\n\t};\n\n\tWriteStream.prototype.end = function(data) {\n\t\tvar self = this;\n\t\tvar args = arguments;\n\n\t\tif (data && typeof data !== 'function') {\n\t\t\tthis.write(data);\n\t\t\tdata = EMPTY;\n\t\t}\n\n\t\tthis.write(EMPTY, function() {\n\t\t\tself._writeBlock(function(err) {\n\t\t\t\tif (err) return self.emit('error', err);\n\t\t\t\tself._flush(function(err) {\n\t\t\t\t\tif (err) return self.emit('error', err);\n\t\t\t\t\tWritable.prototype.end.apply(self, args);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\tvar ReadStream = function(name, opts) {\n\t\tif (!opts) opts = {};\n\n\t\tvar self = this;\n\n\t\tvar start = opts.start || 0;\n\t\tvar blockIndex = (start / blockSize) | 0;\n\t\tvar blockOffset = start - blockIndex * blockSize;\n\t\tvar key = name+'\\xff'+pad(blockIndex);\n\n\t\tthis.name = name;\n\t\tthis._missing = (typeof opts.end === 'number' ? opts.end : Infinity) - start + 1;\n\t\tthis._paused = false;\n\t\tthis._destroyed = false;\n\n\t\tthis._reader = db.createReadStream({\n\t\t\tstart: key,\n\t\t\tend: name+'\\xff\\xff',\n\t\t\tvalueEncoding: ENCODER\n\t\t});\n\n\t\tvar onblock = function(val) {\n\t\t\tkey = name+'\\xff'+pad(++blockIndex);\n\n\t\t\tif (!self._missing) return false;\n\n\t\t\tif (blockOffset) {\n\t\t\t\tval = val.slice(blockOffset);\n\t\t\t\tblockOffset = 0;\n\t\t\t\tif (!val.length) return true;\n\t\t\t}\n\n\t\t\tif (val.length > self._missing) val = val.slice(0, self._missing);\n\n\t\t\tself._missing -= val.length;\n\t\t\tself._pause(!self.push(val));\n\n\t\t\treturn !!self._missing;\n\t\t};\n\n\t\tthis._reader.on('data', function(data) {\n\t\t\twhile (data.key > key) {\n\t\t\t\tif (!onblock(blank)) return;\n\t\t\t}\n\n\t\t\tonblock(data.value);\n\t\t});\n\n\t\tthis._reader.on('error', function(err) {\n\t\t\tself.emit('error', err);\n\t\t});\n\n\t\tthis._reader.on('end', function() {\n\t\t\tself.push(null);\n\t\t});\n\n\t\tReadable.call(this);\n\t};\n\n\tutil.inherits(ReadStream, Readable);\n\n\tReadStream.prototype.destroy = function() {\n\t\tif (this._destroyed) return;\n\t\tthis._destroyed = true;\n\t\tthis._reader.destroy();\n\t\tprocess.nextTick(this.emit.bind(this, 'close'));\n\t};\n\n\tReadStream.prototype._pause = function(paused) {\n\t\tif (this._paused === paused) return;\n\t\tthis._paused = paused;\n\t\tif (this._paused) this._reader.pause();\n\t\telse this._reader.resume();\n\t};\n\n\tReadStream.prototype._read = function() {\n\t\tthis._pause(false);\n\t};\n\n\tblobs.remove = function(name, cb) {\n\t\tcb = once(cb || noop);\n\n\t\tvar batch = [];\n\t\tvar keys = db.createKeyStream({\n\t\t\tstart: name+'\\xff',\n\t\t\tend: name+'\\xff\\xff'\n\t\t});\n\n\t\tkeys.on('error', cb);\n\n\t\tkeys.on('data', function(key) {\n\t\t\tbatch.push({type:'del', key:key});\n\t\t});\n\n\t\tkeys.on('end', function() {\n\t\t\tdb.batch(batch, cb);\n\t\t});\n\t};\n\n\tblobs.size = function(name, cb) {\n\t\tpeek.last(db, {\n\t\t\tstart: name+'\\xff',\n\t\t\tend: name+'\\xff\\xff',\n\t\t\tvalueEncoding:ENCODER\n\t\t}, function(err, latest, val) {\n\t\t\tif (err && err.message === 'range not found') return cb(null, 0);\n\t\t\tif (err) return cb(err);\n\t\t\tif (latest.slice(0, name.length+1) !== name+'\\xff') return cb(null, 0);\n\n\t\t\tcb(null, parseInt(latest.toString().slice(name.length+1), 16) * blockSize + val.length);\n\t\t});\n\t};\n\n\tblobs.write = function(name, data, opts, cb) {\n\t\tif (typeof opts === 'function') return blobs.write(name, data, null, opts);\n\t\tif (!opts) opts = {};\n\t\tif (!cb) cb = noop;\n\n\t\tvar ws = blobs.createWriteStream(name, opts);\n\n\t\tws.on('error', cb);\n\t\tws.on('finish', function() {\n\t\t\tcb();\n\t\t});\n\n\t\tws.write(data);\n\t\tws.end();\n\t}\n\n\tblobs.read = function(name, opts, cb) {\n\t\tif (typeof opts === 'function') return blobs.read(name, null, opts);\n\t\tif (!opts) opts = {};\n\n\t\tvar rs = blobs.createReadStream(name, opts);\n\t\tvar list = [];\n\n\t\trs.on('error', cb);\n\t\trs.on('data', function(data) {\n\t\t\tlist.push(data);\n\t\t});\n\t\trs.on('end', function() {\n\t\t\tcb(null, list.length === 1 ? list[0] : Buffer.concat(list));\n\t\t});\n\t};\n\n\tblobs.createReadStream = function(name, opts) {\n\t\treturn new ReadStream(name, opts);\n\t};\n\n\tblobs.createWriteStream = function(name, opts) {\n\t\treturn new WriteStream(name, opts);\n\t};\n\n\treturn blobs;\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}