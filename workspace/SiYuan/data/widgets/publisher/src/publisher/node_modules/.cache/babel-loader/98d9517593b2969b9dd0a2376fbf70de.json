{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/* Copyright (c) 2013 Rod Vagg, MIT License */\nfunction AbstractChainedBatch(db) {\n  this._db = db;\n  this._operations = [];\n  this._written = false;\n}\n\nAbstractChainedBatch.prototype._checkWritten = function () {\n  if (this._written) throw new Error('write() already called on this batch');\n};\n\nAbstractChainedBatch.prototype.put = function (key, value) {\n  this._checkWritten();\n\n  var err = this._db._checkKeyValue(key, 'key', this._db._isBuffer);\n\n  if (err) throw err;\n  err = this._db._checkKeyValue(value, 'value', this._db._isBuffer);\n  if (err) throw err;\n  if (!this._db._isBuffer(key)) key = String(key);\n  if (!this._db._isBuffer(value)) value = String(value);\n  if (typeof this._put == 'function') this._put(key, value);else this._operations.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n  return this;\n};\n\nAbstractChainedBatch.prototype.del = function (key) {\n  this._checkWritten();\n\n  var err = this._db._checkKeyValue(key, 'key', this._db._isBuffer);\n\n  if (err) throw err;\n  if (!this._db._isBuffer(key)) key = String(key);\n  if (typeof this._del == 'function') this._del(key);else this._operations.push({\n    type: 'del',\n    key: key\n  });\n  return this;\n};\n\nAbstractChainedBatch.prototype.clear = function () {\n  this._checkWritten();\n\n  this._operations = [];\n  if (typeof this._clear == 'function') this._clear();\n  return this;\n};\n\nAbstractChainedBatch.prototype.write = function (options, callback) {\n  this._checkWritten();\n\n  if (typeof options == 'function') callback = options;\n  if (typeof callback != 'function') throw new Error('write() requires a callback argument');\n  if (typeof options != 'object') options = {};\n  this._written = true;\n  if (typeof this._write == 'function') return this._write(callback);\n  if (typeof this._db._batch == 'function') return this._db._batch(this._operations, options, callback);\n  process.nextTick(callback);\n};\n\nmodule.exports = AbstractChainedBatch;","map":{"version":3,"names":["AbstractChainedBatch","db","_db","_operations","_written","prototype","_checkWritten","Error","put","key","value","err","_checkKeyValue","_isBuffer","String","_put","push","type","del","_del","clear","_clear","write","options","callback","_write","_batch","process","nextTick","module","exports"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/node_modules/abstract-leveldown/abstract-chained-batch.js"],"sourcesContent":["/* Copyright (c) 2013 Rod Vagg, MIT License */\n\nfunction AbstractChainedBatch (db) {\n  this._db         = db\n  this._operations = []\n  this._written    = false\n}\n\nAbstractChainedBatch.prototype._checkWritten = function () {\n  if (this._written)\n    throw new Error('write() already called on this batch')\n}\n\nAbstractChainedBatch.prototype.put = function (key, value) {\n  this._checkWritten()\n\n  var err = this._db._checkKeyValue(key, 'key', this._db._isBuffer)\n  if (err) throw err\n  err = this._db._checkKeyValue(value, 'value', this._db._isBuffer)\n  if (err) throw err\n\n  if (!this._db._isBuffer(key)) key = String(key)\n  if (!this._db._isBuffer(value)) value = String(value)\n\n  if (typeof this._put == 'function' )\n    this._put(key, value)\n  else\n    this._operations.push({ type: 'put', key: key, value: value })\n\n  return this\n}\n\nAbstractChainedBatch.prototype.del = function (key) {\n  this._checkWritten()\n\n  var err = this._db._checkKeyValue(key, 'key', this._db._isBuffer)\n  if (err) throw err\n\n  if (!this._db._isBuffer(key)) key = String(key)\n\n  if (typeof this._del == 'function' )\n    this._del(key)\n  else\n    this._operations.push({ type: 'del', key: key })\n\n  return this\n}\n\nAbstractChainedBatch.prototype.clear = function () {\n  this._checkWritten()\n\n  this._operations = []\n\n  if (typeof this._clear == 'function' )\n    this._clear()\n\n  return this\n}\n\nAbstractChainedBatch.prototype.write = function (options, callback) {\n  this._checkWritten()\n\n  if (typeof options == 'function')\n    callback = options\n  if (typeof callback != 'function')\n    throw new Error('write() requires a callback argument')\n  if (typeof options != 'object')\n    options = {}\n\n  this._written = true\n\n  if (typeof this._write == 'function' )\n    return this._write(callback)\n\n  if (typeof this._db._batch == 'function')\n    return this._db._batch(this._operations, options, callback)\n\n  process.nextTick(callback)\n}\n\nmodule.exports = AbstractChainedBatch"],"mappings":"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"},"metadata":{},"sourceType":"script"}