{"ast":null,"code":"import wordpress_compatible from \"./lib/wordpress-compatible\";\nimport { getApiParams } from \"../publish/publishUtil\";\n\nconst wordpressApiClient = type => {\n  const apiParams = getApiParams(type);\n  const client = wordpress_compatible.createClient({\n    url: apiParams.apiUrl,\n    username: apiParams.username,\n    password: apiParams.password\n  });\n\n  async function getPosts(numberOfPosts) {\n    const filter = {\n      // post_type:\"\", // post,page 文章类型\n      // post_status:\"\", // publish 文章状态\n      number: numberOfPosts,\n      // 获取的文章数量，此例中显示的是10篇文章\n      offset: 0,\n      // 从默认顺序里的第几篇文章开始获取，默认是0，就是从头开始，如果要从第二篇，就可以将此参数修改成为1，这个参数适用于文章分列，或者首篇文章不同于其他文章显示\n      orderby: \"date\",\n      //排序规则，此例为按照时间顺序，默认也是时间顺序\n      // s:\"java\",\n      order: \"desc\" // 'ASC'升序，'DESC' 降序\n\n    };\n    const fields = [\"id\", \"title\", \"name\", \"date\"];\n    return await new Promise((resolve, reject) => {\n      client.getPosts(filter, fields, function (error, posts) {\n        if (error) {\n          console.log(\"An error occurred:\", error);\n          reject(error);\n        } else {\n          console.log(\"Found \" + posts.length + \" posts!\");\n          resolve(posts);\n        }\n      });\n    });\n  }\n\n  return {\n    getPosts\n  };\n};\n\nexport default wordpressApiClient;","map":{"version":3,"names":["wordpress_compatible","getApiParams","wordpressApiClient","type","apiParams","client","createClient","url","apiUrl","username","password","getPosts","numberOfPosts","filter","number","offset","orderby","order","fields","Promise","resolve","reject","error","posts","console","log","length"],"sources":["/Users/terwer/Documents/mydocs/my-note-docker/workspace/SiYuan/data/widgets/publisher/src/publisher/src/lib/wordpress/wordpress-api-client.js"],"sourcesContent":["import wordpress_compatible from \"./lib/wordpress-compatible\";\nimport {getApiParams} from \"../publish/publishUtil\";\n\nconst wordpressApiClient = (type) => {\n    const apiParams = getApiParams(type);\n    const client = wordpress_compatible.createClient({\n        url: apiParams.apiUrl,\n        username: apiParams.username,\n        password: apiParams.password\n    });\n\n    async function getPosts(numberOfPosts) {\n        const filter = {\n            // post_type:\"\", // post,page 文章类型\n            // post_status:\"\", // publish 文章状态\n            number: numberOfPosts,// 获取的文章数量，此例中显示的是10篇文章\n            offset: 0,// 从默认顺序里的第几篇文章开始获取，默认是0，就是从头开始，如果要从第二篇，就可以将此参数修改成为1，这个参数适用于文章分列，或者首篇文章不同于其他文章显示\n            orderby: \"date\", //排序规则，此例为按照时间顺序，默认也是时间顺序\n            // s:\"java\",\n            order: \"desc\" // 'ASC'升序，'DESC' 降序\n        };\n        const fields = [\"id\", \"title\", \"name\", \"date\"];\n\n        return await new Promise((resolve, reject) => {\n                client.getPosts(filter, fields, function (error, posts) {\n                    if (error) {\n                        console.log(\"An error occurred:\", error);\n                        reject(error);\n                    } else {\n                        console.log(\"Found \" + posts.length + \" posts!\");\n                        resolve(posts);\n                    }\n                });\n            }\n        );\n    }\n\n    return {\n        getPosts\n    };\n};\n\nexport default wordpressApiClient;\n\n\n"],"mappings":"AAAA,OAAOA,oBAAP,MAAiC,4BAAjC;AACA,SAAQC,YAAR,QAA2B,wBAA3B;;AAEA,MAAMC,kBAAkB,GAAIC,IAAD,IAAU;EACjC,MAAMC,SAAS,GAAGH,YAAY,CAACE,IAAD,CAA9B;EACA,MAAME,MAAM,GAAGL,oBAAoB,CAACM,YAArB,CAAkC;IAC7CC,GAAG,EAAEH,SAAS,CAACI,MAD8B;IAE7CC,QAAQ,EAAEL,SAAS,CAACK,QAFyB;IAG7CC,QAAQ,EAAEN,SAAS,CAACM;EAHyB,CAAlC,CAAf;;EAMA,eAAeC,QAAf,CAAwBC,aAAxB,EAAuC;IACnC,MAAMC,MAAM,GAAG;MACX;MACA;MACAC,MAAM,EAAEF,aAHG;MAGW;MACtBG,MAAM,EAAE,CAJG;MAID;MACVC,OAAO,EAAE,MALE;MAKM;MACjB;MACAC,KAAK,EAAE,MAPI,CAOG;;IAPH,CAAf;IASA,MAAMC,MAAM,GAAG,CAAC,IAAD,EAAO,OAAP,EAAgB,MAAhB,EAAwB,MAAxB,CAAf;IAEA,OAAO,MAAM,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;MACtChB,MAAM,CAACM,QAAP,CAAgBE,MAAhB,EAAwBK,MAAxB,EAAgC,UAAUI,KAAV,EAAiBC,KAAjB,EAAwB;QACpD,IAAID,KAAJ,EAAW;UACPE,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCH,KAAlC;UACAD,MAAM,CAACC,KAAD,CAAN;QACH,CAHD,MAGO;UACHE,OAAO,CAACC,GAAR,CAAY,WAAWF,KAAK,CAACG,MAAjB,GAA0B,SAAtC;UACAN,OAAO,CAACG,KAAD,CAAP;QACH;MACJ,CARD;IASH,CAVQ,CAAb;EAYH;;EAED,OAAO;IACHZ;EADG,CAAP;AAGH,CArCD;;AAuCA,eAAeT,kBAAf"},"metadata":{},"sourceType":"module"}